!function(){"use strict";var e={892:function(e,t,n){e.exports=n.p+"db38627715f9cf8133bd.jpg"},455:function(e,t,n){e.exports=n.p+"83be7dc0176078180086.jpeg"},961:function(e,t,n){e.exports=n.p+"e76a38180f2289d431ba.jpeg"},694:function(e,t,n){e.exports=n.p+"eddff1fd71ff129390dd.jpeg"},801:function(e,t,n){e.exports=n.p+"ae1b38cc16456ed2157b.jpeg"},937:function(e,t,n){e.exports=n.p+"3755f99ca093e6e21308.svg"},685:function(e,t,n){e.exports=n.p+"1fb0ce54682a4a93df2b.jpeg"},923:function(e,t,n){e.exports=n.p+"28c59f2e18d4650c63b7.jpeg"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.p="",function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=function(){function n(e,r){var o=e.card,i=e.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t(this,"_handleLikeIcon",(function(e){e.target.classList.toggle("element__like-btn_active")})),t(this,"_handleDeleteCard",(function(e){var t=e.target.closest(".element");t.remove(),t=null})),this._imgName=o.name,this._imgLink=o.link,this._handleCardClick=i,this._cardTemplateSelector=r}var r,o;return r=n,(o=[{key:"_getTemplate",value:function(){this._cardElement=document.querySelector(this._cardTemplateSelector).content.querySelector(".element").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this;this._cardLikeBtn=this._cardElement.querySelector(".element__like-btn"),this._cardDeleteBtn=this._cardElement.querySelector(".element__delete-btn"),this._cardImg=this._cardElement.querySelector(".element__img"),this._cardLikeBtn.addEventListener("click",this._handleLikeIcon),this._cardDeleteBtn.addEventListener("click",this._handleDeleteCard),this._cardImg.addEventListener("click",(function(){return e._handleCardClick(e._imgName,e._imgLink)}))}},{key:"generateCard",value:function(){return this._getTemplate(),this._setEventListeners(),this._cardTitle=this._cardElement.querySelector(".element__title"),this._cardImg.src=this._imgLink,this._cardImg.alt=this._imgName,this._cardTitle.textContent=this._imgName,this._cardElement}}])&&e(r.prototype,o),n}();function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSelector=t.formSelector,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formElement=n,this._inputList=function(e){if(Array.isArray(e))return o(e)}(r=this._formElement.querySelectorAll(this._inputSelector))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}var t,n;return t=e,(n=[{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.disabled=!0,this._buttonElement.classList.add(this._inactiveButtonClass)):(this._buttonElement.disabled=!1,this._buttonElement.classList.remove(this._inactiveButtonClass))}},{key:"_showInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));t.textContent=e.validationMessage,t.classList.add(this._errorClass),e.classList.add(this._inputErrorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));t.textContent="",t.classList.remove(this._errorClass),e.classList.remove(this._inputErrorClass)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_setEventListeners",value:function(){var e=this;this.toggleButtonState(),this._inputList.forEach((function(t){return t.addEventListener("input",(function(){e._checkInputValidity(t),e.toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){return e.preventDefault()})),this._setEventListeners()}},{key:"resetFormValidation",value:function(){this._formElement.reset()}}])&&i(t.prototype,n),e}(),l=u;function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close()})),c(this,"_handleClickClose",(function(e){e.target.classList.contains("popup_opened")&&n.close()})),this._popup=document.querySelector(t)}var t,n;return t=e,(n=[{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(".popup__close-btn").addEventListener("click",(function(){return e.close()}))}},{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("click",this._handleClickClose),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("click",this._handleClickClose),document.removeEventListener("keydown",this._handleEscClose)}}])&&a(t.prototype,n),e}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return _="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},_(e,t,n||e)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function h(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(o){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._formElement=n._popup.querySelector(".popup__form"),n._handleFormSubmit=t,n}return t=u,(n=[{key:"_getInputValues",value:function(){var e;this._inputElementsList=function(e){if(Array.isArray(e))return p(e)}(e=this._formElement.querySelectorAll(".popup__input"))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();var t={};return this._inputElementsList.forEach((function(e){return t[e.name]=e.value})),t}},{key:"setEventListeners",value:function(){var e=this;_(y(u.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e._formElement.reset()}))}},{key:"close",value:function(){_(y(u.prototype),"close",this).call(this),this._formElement.reset()}}])&&m(t.prototype,n),u}(s);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},E(e,t,n||e)}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function k(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(r);if(o){var n=C(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return k(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._popupImgElement=t._popup.querySelector(".popup__img"),t._popupImgCaptionElement=t._popup.querySelector(".popup__caption"),t}return t=u,(n=[{key:"open",value:function(e,t){this._popupImgCaptionElement.textContent=e,this._popupImgElement.src=t,this._popupImgElement.alt=e,E(C(u.prototype),"open",this).call(this)}}])&&g(t.prototype,n),u}(s);function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(){this.clear(),this._items.forEach(this._renderer)}}])&&L(t.prototype,n),e}();function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var I=function(){function e(t){var n=t.userTitleSelector,r=t.userSubtitleSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userTitleElement=document.querySelector(n),this._userSubtitleElement=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{title:this._userTitleElement.textContent,subtitle:this._userSubtitleElement.textContent}}},{key:"setUserInfo",value:function(e,t){this._userTitleElement.textContent=e,this._userSubtitleElement.textContent=t}}])&&j(t.prototype,n),e}(),q=[{name:"Antelope Canyon",link:n(892)},{name:"Cape Hatteras Lighthouse",link:n(961)},{name:"Shenandoah National Park",link:n(923)},{name:"Big Sur",link:n(455)},{name:"Killington Vermont",link:n(801)},{name:"Key West",link:n(694)}],x={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit",inactiveButtonClass:"popup__submit_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},B=document.querySelector(".logo"),T=document.querySelector(".profile__avatar"),P=document.querySelector(".profile__edit-btn"),R=document.querySelector(".profile__title"),A=document.querySelector(".profile__subtitle"),D=document.querySelector(".popup_rel_profile").querySelector(".popup__form"),V=D.querySelector("#name-input"),U=D.querySelector("#about-input"),N=document.querySelector(".profile__add-btn"),M=document.querySelector(".popup_rel_place").querySelector(".popup__form"),F=n(937),H=n(685);B.src=F,T.src=H;var K=new l(x,D),$=new l(x,M);K.enableValidation(),$.enableValidation();var W=new w(".popup_rel_image");W.setEventListeners();var z=function(e){return new r({card:e,handleCardClick:function(e,t){W.open(e,t)}},"#element-template")},G=new O({items:q,renderer:function(e){var t=z(e).generateCard();G.addItem(t)}},".elements");G.renderItems();var J=new I({userTitleSelector:".profile__title",userSubtitleSelector:".profile__subtitle"}),Q=R.textContent,X=A.textContent;J.setUserInfo(Q,X);var Y=new v(".popup_rel_profile",(function(e){var t=e.title,n=e.subtitle;J.setUserInfo(t,n),Y.close(),K.toggleButtonState()}));Y.setEventListeners();var Z=new v(".popup_rel_place",(function(e){var t=e.name,n=e.link;G.addItem(z({name:t,link:n}).generateCard()),Z.close(),$.toggleButtonState()}));Z.setEventListeners(),P.addEventListener("click",(function(){var e=J.getUserInfo(),t=e.title,n=e.subtitle;V.value=t,U.value=n,K.toggleButtonState(),Y.open()})),N.addEventListener("click",(function(){Z.open(),$.toggleButtonState()}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkMsR0FPbkMsSUFLTUUsRUFBbUIsSUFBSTdELEVBQWMsc0JBTFAsU0FBQyxHQUFxQixJQUFwQjZCLEVBQW9CLEVBQXBCQSxNQUFPQyxFQUFhLEVBQWJBLFNBQzNDMkIsRUFBS0csWUFBWS9CLEVBQU9DLEdBQ3hCK0IsRUFBaUJuRSxRQUNqQmtELEVBQXlCMUQsdUJBRzNCMkUsRUFBaUJiLG9CQUdqQixJQUtNYyxFQUFjLElBQUk5RCxFQUFjLG9CQUxQLFNBQUMsR0FBaUIsSUFBaEJuRSxFQUFnQixFQUFoQkEsS0FBTUUsRUFBVSxFQUFWQSxLQUNyQ3FILEVBQWFHLFFBQVFOLEVBQWMsQ0FBQ3BILEtBQUFBLEVBQU1FLEtBQUFBLElBQU91SCxnQkFDakRRLEVBQVlwRSxRQUNabUQsRUFBb0IzRCx1QkFHdEI0RSxFQUFZZCxvQkFjWmQsRUFBZXhGLGlCQUFpQixTQVBOLFdBQ3hCLE1BQTBCK0csRUFBS00sY0FBeEJsQyxFQUFQLEVBQU9BLE1BQU9DLEVBQWQsRUFBY0EsU0FDZFEsRUFBcUJoQyxNQUFRdUIsRUFDN0JVLEVBQXNCakMsTUFBUXdCLEVBQzlCYyxFQUF5QjFELG9CQUN6QjJFLEVBQWlCVixVQVNuQlgsRUFBVTlGLGlCQUFpQixTQUpOLFdBQ25Cb0gsRUFBWVgsT0FDWk4sRUFBb0IzRCx1QiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsIi8qKlxuICogVGhpcyBtb2R1bGUgdGFrZXMgY2FyZSBvZiBjcmVhdGluZyBhIG5ldyBpbWFnZSBjYXJkIGVsZW1lbnRcbiAqIEBtb2R1bGUgQ2FyZFxuICovXG5cbi8qKiBDbGFzcyByZXByZXNlbnRpbmcgYW4gaW1hZ2UgY2FyZCBpbiB0aGUgd2VicGFnZSAqL1xuY2xhc3MgQ2FyZCB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IGltYWdlIGNhcmQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogLSBBbiBvYmplY3QgaGF2aW5nIG5ldyBpbWFnZSBjYXJkIGRldGFpbHMgYW5kIGEgY2FsbGJhY2sgdG8gaGFuZGxlIGNsaWNrIG9uIGFueSBpbWFnZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2FyZFRlbXBsYXRlU2VsZWN0b3IgLSAgVGhlIGNhcmQgdGVtcGxhdGUgZWxlbWVudCBzZWxlY3Rvci5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHtjYXJkLCBoYW5kbGVDYXJkQ2xpY2t9LCBjYXJkVGVtcGxhdGVTZWxlY3Rvcikge1xuICAgICh7IG5hbWUgICAgICAgICAgICA6IHRoaXMuX2ltZ05hbWUsXG4gICAgICBsaW5rICAgICAgICAgICAgIDogdGhpcy5faW1nTGluayB9ID0gY2FyZCk7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrICAgICAgID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIHRoaXMuX2NhcmRUZW1wbGF0ZVNlbGVjdG9yICA9IGNhcmRUZW1wbGF0ZVNlbGVjdG9yO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGltYWdlIGNhcmQgZWxlbWVudCBmcm9tIHRoZSBIVE1MIHRlbXBsYXRlLlxuICAgKi9cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRUZW1wbGF0ZVNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUgY2xpY2tpbmcgb2YgdGhlIGxpa2UgYnV0dG9uIG9uIHRoZSBpbWFnZSBjYXJkLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZSBUaGUgZGVmYXVsdCBldmVudCBvYmplY3QuXG4gICAqL1xuICBfaGFuZGxlTGlrZUljb24gPSBlID0+IHtcbiAgICBlLnRhcmdldFxuICAgICAgLmNsYXNzTGlzdFxuICAgICAgLnRvZ2dsZShcImVsZW1lbnRfX2xpa2UtYnRuX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSBkZWxldGlvbiBvZiB0aGUgaW1hZ2UgY2FyZCwgd2hlbiBkZWxldGUgaWNvbiBvbiB0aGUgaW1hZ2UgY2FyZCBpcyBjbGlja2VkLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZSBUaGUgZGVmYXVsdCBldmVudCBvYmplY3QuXG4gICAqL1xuICBfaGFuZGxlRGVsZXRlQ2FyZCA9IGUgPT4ge1xuICAgIGxldCBjYXJkVG9EZWxldGUgPSBlLnRhcmdldC5jbG9zZXN0KFwiLmVsZW1lbnRcIik7XG4gICAgY2FyZFRvRGVsZXRlLnJlbW92ZSgpO1xuICAgIGNhcmRUb0RlbGV0ZSA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBhbGwgdGhlIGV2ZW50IGxpc3RlbmVycyBvbiB0aGUgbmV3IGltYWdlIGNhcmQgZWxlbWVudFxuICAgKi9cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2NhcmRMaWtlQnRuICAgICA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZS1idG5cIik7XG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ0biAgID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19kZWxldGUtYnRuXCIpO1xuICAgIHRoaXMuX2NhcmRJbWcgICAgICAgICA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1nXCIpO1xuXG4gICAgdGhpcy5fY2FyZExpa2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUxpa2VJY29uKTtcbiAgICB0aGlzLl9jYXJkRGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKTtcbiAgICB0aGlzLl9jYXJkSW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5faW1nTmFtZSwgdGhpcy5faW1nTGluaykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyB0aGUgbmV3IGltYWdlIGNhcmQgZWxlbWVudCBhbmQgcG9wdWxhdGVzIGl0IHdpdGggdGhlIHJlcXVpcmVkIHZhbHVlcy5cbiAgICogQHJldHVybiB7T2JqZWN0fSBUaGUgbmV3IGltYWdlIGNhcmQgZWxlbWVudC5cbiAgICovXG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICB0aGlzLl9jYXJkVGl0bGUgICAgICAgICAgICAgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX3RpdGxlXCIpO1xuICAgIHRoaXMuX2NhcmRJbWcuc3JjICAgICAgICAgICA9IHRoaXMuX2ltZ0xpbms7XG4gICAgdGhpcy5fY2FyZEltZy5hbHQgICAgICAgICAgID0gdGhpcy5faW1nTmFtZTtcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9pbWdOYW1lO1xuXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcmQ7IiwiLyoqXG4gKiBUaGlzIG1vZHVsZSB0YWtlcyBjYXJlIG9mIGFsbCB0aGUgdmFsaWRhdGlvbnMgb2YgdGhlIGZvcm1zXG4gKiBAbW9kdWxlIEZvcm1WYWxpZGF0b3JcbiAqL1xuXG4vKiogQ2xhc3MgcmVwcmVzZW50aW5nIGEgZm9ybSB2YWxpZGF0b3IgKi9cbmNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBmb3JtIHZhbGlkYXRvci5cbiAgICogQHBhcmFtIHtPYmplY3R9IGZvcm1WYWxpZGF0aW9uU2V0dGluZ3MgLSBUaGUgb2JqZWN0IGhhdmluZyBhbGwgdGhlIHJlcXVpcmVkIHNldHRpbmdzIGZvciBmb3JtIHZhbGlkYXRpb24uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBmb3JtRWxlbWVudCAtICBUaGUgZm9ybSBlbGVtZW50IHRoYXQgaGFzIHRvIGJlIHZhbGlkYXRlZC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGZvcm1WYWxpZGF0aW9uU2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XG4gICAgKHsgZm9ybVNlbGVjdG9yICAgICAgICAgICA6IHRoaXMuX2Zvcm1TZWxlY3RvcixcbiAgICAgIGlucHV0U2VsZWN0b3IgICAgICAgICAgIDogdGhpcy5faW5wdXRTZWxlY3RvcixcbiAgICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yICAgIDogdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IsXG4gICAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzICAgICA6IHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MsXG4gICAgICBpbnB1dEVycm9yQ2xhc3MgICAgICAgICA6IHRoaXMuX2lucHV0RXJyb3JDbGFzcyxcbiAgICAgIGVycm9yQ2xhc3MgICAgICAgICAgICAgIDogdGhpcy5fZXJyb3JDbGFzcyB9ID0gZm9ybVZhbGlkYXRpb25TZXR0aW5ncyk7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgICAgICAgICA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2lucHV0TGlzdCAgICAgICAgICAgPSBbLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCAgICAgICA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9XG5cbiAgLyoqXG4gICAqICBDaGVja3MgaWYgYWxsIHRoZSBJbnB1dCBFbGVtZW50cyBhcmUgdmFsaWQgYXQgdGhlIG1vbWVudC5cbiAgICogIEByZXR1cm5zIHtCb29sZWFufSB0cnVlL2ZhbHNlXG4gICAqL1xuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZShpbnB1dEVsZW1lbnQgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XG4gIH1cblxuICAvKipcbiAgICogIFRvZ2dsZXMgdGhlIHN0YXRlIChhY3RpdmUgb3IgaW5hY3RpdmUpIG9mIHRoZSBTdWJtaXQgYnV0dG9uLlxuICAgKi9cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqICBTaG93cyB0aGUgZXJyb3IgbWVzc2FnZSBhbmQgY2hhbmdlIHRoZSBJbnB1dCBFbGVtZW50IHN0eWxlXG4gICAqICBAcGFyYW0ge09iamVjdH0gaW5wdXRFbGVtZW50IFRoZSBhY3RpdmUgaW5wdXQgZWxlbWVudCBhdCB0aGUgbW9tZW50LlxuICAgKi9cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yU3BhbkVsZW1lbnQgICAgICAgID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGVycm9yU3BhbkVsZW1lbnQudGV4dENvbnRlbnQgID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yU3BhbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICB9XG5cbiAgLyoqXG4gICAqICBIaWRlcyB0aGUgZXJyb3IgbWVzc2FnZSBhbmQgY2hhbmdlIHRoZSBJbnB1dCBFbGVtZW50IHN0eWxlXG4gICAqICBAcGFyYW0ge09iamVjdH0gaW5wdXRFbGVtZW50IFRoZSBhY3RpdmUgaW5wdXQgZWxlbWVudCBhdCB0aGUgbW9tZW50LlxuICAgKi9cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yU3BhbkVsZW1lbnQgICAgICAgID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGVycm9yU3BhbkVsZW1lbnQudGV4dENvbnRlbnQgID0gXCJcIjtcbiAgICBlcnJvclNwYW5FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiAgQ2hlY2tzIGlmIHRoZSBjb250ZW50IG9mIHRoZSBJbnB1dCBFbGVtZW50IGlzIHZhbGlkIGF0IHRoZSBtb21lbnQgYW5kIGhpZGUgb3Igc2hvdyBlcnJvcnMgYWNjb3JkaW5nbHlcbiAgICogIEBwYXJhbSB7T2JqZWN0fSBpbnB1dEVsZW1lbnQgVGhlIGFjdGl2ZSBpbnB1dCBlbGVtZW50IGF0IHRoZSBtb21lbnQuXG4gICAqL1xuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmKGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCl7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiAgRmluZHMgYWxsIHRoZSBmaWVsZHMgb2YgdGhlIGZvcm0gYW5kIHNldCAnaW5wdXQnIGV2ZW50IGxpc3RlbmVyXG4gICAqL1xuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKCBpbnB1dEVsZW1lbnQgPT4gXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiAgRW5hYmxlcyBhbGwgdGhlIHZhbGlkYXRpb25zIGZvciB0aGUgY3VycmVudCBmb3JtXG4gICAqL1xuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZSA9PiBlLnByZXZlbnREZWZhdWx0KCkpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICAvKipcbiAgICogIFJlc2V0cyBmb3JtIHZhbGlkYXRpb24gaW4gdGhlIGN1cnJlbnQgZm9ybS5cbiAgICovXG4gIHJlc2V0Rm9ybVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcbiAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7IiwiLyoqXG4gKiBUaGlzIG1vZHVsZSB0YWtlcyBjYXJlIG9mIGdlbmVyaWMgZnVuY3Rpb25hbGl0aWVzIG9mIGEgcG9wdXAsIGxpa2Ugb3BlbmluZyBhbmQgY2xvc2luZyBvZiBhIHBvcHVwIHdpbmRvd1xuICogQG1vZHVsZSBQb3B1cFxuICovXG5cbi8qKiBDbGFzcyByZXByZXNlbnRpbmcgYSBQb3B1cCBjb21wb25lbnQgdGhhdCBoYXMgZnVuY3Rpb25hbGl0eSB0byBvcGVuIGFuZCBjbG9zZSB0aGUgcG9wdXAgd2luZG93LiAqL1xuY2xhc3MgUG9wdXAge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBQb3B1cCBjb21wb25lbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwb3B1cFNlbGVjdG9yIC0gIFRoZSBDU1MgY2xhc3Mgc2VsZWN0b3IgdG8gc2VsZWN0IHRoZSBwb3B1cCB3aW5kb3cuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXAgICAgICAgICAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUgY2xvc2luZyBvZiB0aGUgb3BlbmVkIHBvcHVwIGJ5IHByZXNzaW5nIEVzY2FwZSBrZXkuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBlIFRoZSBkZWZhdWx0IGV2ZW50IG9iamVjdC5cbiAgICovXG4gIF9oYW5kbGVFc2NDbG9zZSA9IGUgPT4ge1xuICAgIGlmKGUua2V5ID09PSBcIkVzY2FwZVwiKXtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUgY2xvc2luZyBvZiB0aGUgb3BlbmVkIHBvcHVwIGJ5IG1vdXNlIGNsaWNrIG9uIG92ZXJsYXkgb3V0c2lkZSB0aGUgYm9yZGVycyBvZiB0aGUgcG9wdXAgaXRzZWxmLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZSBUaGUgZGVmYXVsdCBldmVudCBvYmplY3QuXG4gICAqL1xuICBfaGFuZGxlQ2xpY2tDbG9zZSA9IGUgPT4ge1xuICAgIGlmKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX29wZW5lZFwiKSl7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgYWxsIHRoZSBldmVudCBsaXN0ZW5lcnMgb24gdGhlIHBvcHVwIHdpbmRvd1xuICAgKi9cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgcG9wdXBDbG9zZUJ0biA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWJ0blwiKTtcbiAgICBwb3B1cENsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIE9wZW5zIHRoZSBwb3B1cCBhbmQgYXR0YWNoZXMgdGhlIHJlcXVpcmVkIGV2ZW50IGxpc3RlbmVycy5cbiAgICovXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2xpY2tDbG9zZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlcyB0aGUgcG9wdXAgYW5kIHJlbW92ZXMgdGhlIHJlcXVpcmVkIGV2ZW50IGxpc3RlbmVycy5cbiAgICovXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUNsaWNrQ2xvc2UpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cDsiLCIvKipcbiAqIFRoaXMgbW9kdWxlIHRha2VzIGNhcmUgb2Ygc3BlY2lmaWMgZnVuY3Rpb25hbGl0aWVzIG9mIGEgUG9wdXAgd2l0aCBhIEZvcm0gZWxlbWVudC5cbiAqIEBtb2R1bGUgUG9wdXBXaXRoRm9ybVxuICovXG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuLyoqIENsYXNzIGV4dGVuZGluZyBmcm9tIHRoZSBwYXJlbnQgUG9wdXAgY29tcG9uZW50IHRvIGltcGxlbWVudCB0aGUgZnVuY3Rpb25hbGl0aWVzIHNwZWNpZmljIHRvIHRoZSBGb3JtIFBvcHVwIENvbXBvbmVudCAqL1xuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgRm9ybSBQb3B1cCBjb21wb25lbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmb3JtUG9wdXBTZWxlY3RvciAtICBUaGUgQ1NTIGNsYXNzIHNlbGVjdG9yIHRvIHNlbGVjdCB0aGUgZm9ybSBwb3B1cCB3aW5kb3cuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oT2JqZWN0KX0gaGFuZGxlRm9ybVN1Ym1pdCAtIFRoZSBmdW5jdGlvbiB0aGF0IGhhbmRsZXMgdGhlIGZvcm0ncyBgc3VibWl0YCBldmVudFxuICAgKi9cbiAgY29uc3RydWN0b3IoZm9ybVBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcihmb3JtUG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYWxsIHRoZSB2YWx1ZXMgb2YgdGhlIGlucHV0IGVsZW1lbnRzIG9mIHRoZSBmb3JtLlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBBbiBvYmplY3QgaGF2aW5nIGFsbCB0aGUgdmFsdWVzIG9mIHRoZSBmb3JtIGZpZWxkcy5cbiAgICovXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzTGlzdCA9IFsuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKV07XG4gICAgY29uc3QgZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHNMaXN0LmZvckVhY2goXG4gICAgICBpbnB1dEVsZW1lbnQgPT4gXG4gICAgICAgIGZvcm1WYWx1ZXNbaW5wdXRFbGVtZW50Lm5hbWVdID0gaW5wdXRFbGVtZW50LnZhbHVlXG4gICAgKTtcbiAgICByZXR1cm4gZm9ybVZhbHVlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGFsbCB0aGUgZXZlbnQgbGlzdGVuZXJzIG9uIHRoZSBwb3B1cCB3aW5kb3cgd2l0aCBmb3JtXG4gICAqL1xuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbG9zZXMgdGhlIHBvcHVwIHdpdGggZm9ybSwgcmVtb3ZlcyB0aGUgcmVxdWlyZWQgZXZlbnQgbGlzdGVuZXJzIGFuZCByZXNldHMgdGhlIGZvcm0gZmllbGRzLlxuICAgKi9cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEZvcm07IiwiLyoqXG4gKiBUaGlzIG1vZHVsZSB0YWtlcyBjYXJlIG9mIGFkZGluZyBhbiBpbWFnZSB0byB0aGUgcG9wdXAgd2l0aCBpdHMgc3JjIGF0dHJpYnV0ZSBhbmQgY2FwdGlvbi5cbiAqIEBtb2R1bGUgUG9wdXBXaXRoSW1hZ2VcbiAqL1xuaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbi8qKiBDbGFzcyBleHRlbmRpbmcgZnJvbSB0aGUgcGFyZW50IFBvcHVwIGNvbXBvbmVudCB0byBpbXBsZW1lbnQgdGhlIGZ1bmN0aW9uYWxpdGllcyBzcGVjaWZpYyB0byB0aGUgSW1hZ2UgUG9wdXAgQ29tcG9uZW50ICovXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgSW1hZ2UgUG9wdXAgY29tcG9uZW50LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcG9wdXBTZWxlY3RvciAtICBUaGUgQ1NTIGNsYXNzIHNlbGVjdG9yIHRvIHNlbGVjdCB0aGUgaW1hZ2UgcG9wdXAgd2luZG93LlxuICAgKi9cbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwSW1nRWxlbWVudCAgICAgICAgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWdcIik7XG4gICAgdGhpcy5fcG9wdXBJbWdDYXB0aW9uRWxlbWVudCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2NhcHRpb25cIik7XG4gIH1cblxuICAvKipcbiAgICogT3BlbnMgdGhlIGltYWdlIHBvcHVwIGFuZCBzZXRzIHRoZSBpbWFnZSBjYXB0aW9uIGFuZCBsaW5rLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaW1nQ2FwdGlvbiAtICBUaGUgY2FwdGlvbiBvZiB0aGUgaW1hZ2UgdG8gYmUgcHJldmlld2VkIG9yIG9wZW5lZC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGltZ0xpbmsgLSAgVGhlIHVybCBvciBsaW5rIG9mIHRoZSBpbWFnZSB0byBiZSBwcmV2aWV3ZWQgb3Igb3BlbmVkLlxuICAgKi9cbiAgb3BlbihpbWdDYXB0aW9uLCBpbWdMaW5rKSB7XG4gICAgdGhpcy5fcG9wdXBJbWdDYXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IGltZ0NhcHRpb247XG4gICAgdGhpcy5fcG9wdXBJbWdFbGVtZW50LnNyYyAgICAgICAgICAgICAgICA9IGltZ0xpbms7XG4gICAgdGhpcy5fcG9wdXBJbWdFbGVtZW50LmFsdCAgICAgICAgICAgICAgICA9IGltZ0NhcHRpb247XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlOyIsIi8qKlxuICogVGhpcyBtb2R1bGUgdGFrZXMgY2FyZSBvZiByZW5kZXJpbmcgYSBsaXN0IG9mIGVsZW1lbnRzIG9uIGEgcGFnZVxuICogQG1vZHVsZSBTZWN0aW9uXG4gKi9cblxuLyoqIENsYXNzIHJlcHJlc2VudGluZyBhIExheWVyIHRoYXQgdGFrZXMgcmVhZHktbWFkZSBtYXJrdXAgYW5kIGFkZHMgaXQgdG8gdGhlIERPTS4gKi9cbmNsYXNzIFNlY3Rpb24ge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBsYXllci5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9iaiAtIFRoZSBvYmplY3QgaGFzIHR3byBwcm9wZXJ0aWVzIC0gYGl0ZW1zYCBhbmQgYHJlbmRlcmVyYC4gVGhlIGBpdGVtc2AgcHJvcGVydHkgc2VydmUgYXMgYW4gYXJyYXkgb2YgZGF0YSBhbmQgdGhlIGByZW5kZXJlcmAgcHJvcGVydHkgaXMgYSBmdW5jdGlvbiByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgYW5kIHJlbmRlcmluZyBkYXRhIG9uIGEgcGFnZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvbnRhaW5lclNlbGVjdG9yIC0gIFRoZSBDU1MgY2xhc3Mgc2VsZWN0b3IgdG8gc2VsZWN0IHRoZSBjb250YWluZXIgZm9yIGFkZGluZyB0aGUgY2FyZCBlbGVtZW50cy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyAgICAgICAgID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgICAgICA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUYWtlcyBhIERPTSBlbGVtZW50IGFuZCBhZGRzIGl0IHRvIHRoZSBjb250YWluZXIuXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQgVGhlIEhUTUwgRWxlbWVudCB0byBhZGQgdG8gdGhlIGNvbnRhaW5lci5cbiAgICovXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyB0aGUgY29udGFpbmVyIG9mIGFsbCB0aGUgY2hpbGQgZWxlbWVudHMuXG4gICAqL1xuICBjbGVhcigpIHtcbiAgICB0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBJdGVyYXRlcyB0aHJvdWdoIHRoZSBhcnJheSBvZiBkYXRhIGVsZW1lbnRzIGFuZCByZW5kZXJzIGVhY2ggZWxlbWVudCBvbiBhIHBhZ2UuXG4gICAqL1xuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLmNsZWFyKCk7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCh0aGlzLl9yZW5kZXJlcik7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjsiLCIvKipcbiAqIFRoaXMgbW9kdWxlIHRha2VzIGNhcmUgb2YgcmVuZGVyaW5nIGluZm9ybWF0aW9uIGFib3V0IHRoZSB1c2VyIG9uIHRoZSBwYWdlLlxuICogQG1vZHVsZSBVc2VySW5mb1xuICovXG5cbi8qKiBDbGFzcyBpcyByZXNwb25zaWJsZSBmb3IgcmVuZGVyaW5nIGluZm9ybWF0aW9uIGFib3V0IHRoZSB1c2VyIG9uIHRoZSBwYWdlLiAqL1xuY2xhc3MgVXNlckluZm8ge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBVc2VySW5mbyBjb21wb25lbnQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogLSAgQW4gb2JqZWN0IHdpdGggdGhlIHNlbGVjdG9ycyBvZiB0d28gZWxlbWVudHM6IG9uZSBjb250YWluaW5nIHRoZSB1c2VyJ3MgbmFtZSwgYW5kIGFub3RoZXIgY29udGFpbmluZyB0aGUgdXNlcidzIGpvYi5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHt1c2VyVGl0bGVTZWxlY3RvciwgdXNlclN1YnRpdGxlU2VsZWN0b3J9KSB7XG4gICAgdGhpcy5fdXNlclRpdGxlRWxlbWVudCAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyVGl0bGVTZWxlY3Rvcik7XG4gICAgdGhpcy5fdXNlclN1YnRpdGxlRWxlbWVudCAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyU3VidGl0bGVTZWxlY3Rvcik7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHVzZXIuIFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBBbiBvYmplY3Qgd2l0aCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgdXNlci4gXG4gICAqL1xuICBnZXRVc2VySW5mbygpIHtcbiAgICBjb25zdCB1c2VyRGF0YSA9IHtcbiAgICAgIHRpdGxlOiB0aGlzLl91c2VyVGl0bGVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgc3VidGl0bGU6IHRoaXMuX3VzZXJTdWJ0aXRsZUVsZW1lbnQudGV4dENvbnRlbnRcbiAgICB9O1xuICAgIHJldHVybiB1c2VyRGF0YTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBuZXcgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHVzZXIuIFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGl0bGUgLSBUaGUgbmV3IG5hbWUgb3IgdGl0bGUgb2YgdGhlIHVzZXIuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdWJ0aXRsZSAtIFRoZSBuZXcgam9iIG9yIHN1YnRpdGxlIG9mIHRoZSB1c2VyLlxuICAgKi9cbiAgc2V0VXNlckluZm8odGl0bGUsIHN1YnRpdGxlKSB7XG4gICAgdGhpcy5fdXNlclRpdGxlRWxlbWVudC50ZXh0Q29udGVudCA9IHRpdGxlO1xuICAgIHRoaXMuX3VzZXJTdWJ0aXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSBzdWJ0aXRsZTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBVc2VySW5mbzsiLCIvLyBJbXBvcnQgYWxsIHRoZSBpbWFnZXNcbmltcG9ydCBhbnRlbG9wZUNhbnlvbkltZ1VybCAgICAgZnJvbSBcIi4uL2ltYWdlcy9hbnRlbG9wZS1jYW55b24tYXJpem9uYS5qcGdcIjtcbmltcG9ydCBjYXBlSGF0dGVyYXNJbWdVcmwgICAgICAgZnJvbSBcIi4uL2ltYWdlcy9jYXBlLWhhdHRlcmFzLWxpZ2h0aG91c2Utbm9ydGgtY2Fyb2xpbmEuanBlZ1wiO1xuaW1wb3J0IHNoZW5hbmRvYWhJbWdVcmwgICAgICAgICBmcm9tIFwiLi4vaW1hZ2VzL3NoZW5hbmRvYWgtbmF0aW9uYWwtcGFyay5qcGVnXCI7XG5pbXBvcnQgYmlnU3VySW1nVXJsICAgICAgICAgICAgIGZyb20gXCIuLi9pbWFnZXMvYmlnLXN1ci1jYWxpZm9ybmlhLmpwZWdcIjtcbmltcG9ydCBraWxsaW5ndG9uSW1nVXJsICAgICAgICAgZnJvbSBcIi4uL2ltYWdlcy9raWxsaW5ndG9uLXZlcm1vbnQuanBlZ1wiO1xuaW1wb3J0IGtleVdlc3RJbWdVcmwgICAgICAgICAgICBmcm9tIFwiLi4vaW1hZ2VzL2tleS13ZXN0LWZsb3JpZGEuanBlZ1wiO1xuXG4vLyBJbml0aWFsIENhcmRzIHRvIHNob3cgd2hpbGUgdGhlIHBhZ2UgbG9hZHNcbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIkFudGVsb3BlIENhbnlvblwiLFxuICAgIGxpbms6IGFudGVsb3BlQ2FueW9uSW1nVXJsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkNhcGUgSGF0dGVyYXMgTGlnaHRob3VzZVwiLFxuICAgIGxpbms6IGNhcGVIYXR0ZXJhc0ltZ1VybFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJTaGVuYW5kb2FoIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBzaGVuYW5kb2FoSW1nVXJsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkJpZyBTdXJcIixcbiAgICBsaW5rOiBiaWdTdXJJbWdVcmxcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiS2lsbGluZ3RvbiBWZXJtb250XCIsXG4gICAgbGluazoga2lsbGluZ3RvbkltZ1VybFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJLZXkgV2VzdFwiLFxuICAgIGxpbms6IGtleVdlc3RJbWdVcmxcbiAgfVxuXTtcblxuLy8gU2V0dGluZ3MgbmVlZGVkIGZvciBmb3JtIHZhbGlkYXRpb25cbmV4cG9ydCBjb25zdCBmb3JtVmFsaWRhdGlvblNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3IgICAgICAgIDogXCIucG9wdXBfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvciAgICAgICA6IFwiLnBvcHVwX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX3N1Ym1pdFwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzIDogXCJwb3B1cF9fc3VibWl0X2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzcyAgICAgOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3MgICAgICAgICAgOiBcInBvcHVwX19lcnJvcl92aXNpYmxlXCJcbn07XG5cbi8vIFNlbGVjdCBwYWdlIGxvZ28gYW5kIHByb2ZpbGUgcGljdHVyZSBFbGVtZW50c1xuZXhwb3J0IGNvbnN0IHBhZ2VMb2dvRWxlbWVudCAgICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmxvZ29cIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZVBpY0VsZW1lbnQgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyXCIpO1xuXG4vLyBTZWxlY3QgcmVxdWlyZWQgRE9NIEVsZW1lbnRzIGZyb20gVXNlciBQcm9maWxlXG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVCdG4gICAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idG5cIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlICAgICAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZVN1YnRpdGxlICAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fc3VidGl0bGVcIik7XG5cbi8vIFNlbGVjdCByZXF1aXJlZCBET00gRWxlbWVudHMgZnJvbSBFZGl0IFVzZXIgUHJvZmlsZSBQb3B1cFxuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlUG9wdXAgICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3JlbF9wcm9maWxlXCIpO1xuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlUG9wdXBGb3JtICAgPSBlZGl0UHJvZmlsZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVOYW1lSW5wdXQgICA9IGVkaXRQcm9maWxlUG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZS1pbnB1dFwiKTtcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZUFib3V0SW5wdXQgID0gZWRpdFByb2ZpbGVQb3B1cEZvcm0ucXVlcnlTZWxlY3RvcihcIiNhYm91dC1pbnB1dFwiKTtcblxuLy8gU2VsZWN0IHJlcXVpcmVkIERPTSBFbGVtZW50cyBmb3IgYWRkaW5nIG5ldyBJbWFnZVxuZXhwb3J0IGNvbnN0IGFkZEltZ0J0biAgICAgICAgICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idG5cIik7XG5cbi8vIFNlbGVjdCByZXF1aXJlZCBET00gRWxlbWVudHMgZnJvbSBBZGQgTmV3IEltYWdlIFBvcHVwXG5leHBvcnQgY29uc3QgYWRkSW1nUG9wdXAgICAgICAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfcmVsX3BsYWNlXCIpO1xuZXhwb3J0IGNvbnN0IGFkZEltZ1BvcHVwRm9ybSAgICAgICAgPSBhZGRJbWdQb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpOyIsIi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAvL1xuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEltcG9ydCBNb2R1bGVzIGFuZCBDb25zdGFudHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4vLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogLy9cbi8vIEltcG9ydCBtYWluIHN0eWxlc2hlZXRcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xuXG4vLyBJbXBvcnQgbW9kdWxlc1xuaW1wb3J0IENhcmQgICAgICAgICAgICAgICAgIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yICAgICAgICBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSAgICAgICAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlICAgICAgIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlXCI7XG5pbXBvcnQgU2VjdGlvbiAgICAgICAgICAgICAgZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvICAgICAgICAgICAgIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCJcblxuLy8gSW1wb3J0IEluaXRpYWwgQ2FyZCBEYXRhXG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMgfSAgICAgICBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbi8vIEltcG9ydCBsb2dvIGFuZCBwcm9maWxlIHBpY3R1cmVcbmltcG9ydCBwYWdlTG9nb1VybCAgICAgICAgICBmcm9tIFwiLi4vaW1hZ2VzL2xvZ28uc3ZnXCI7XG5pbXBvcnQgcHJvZmlsZVBpY1VybCAgICAgICAgZnJvbSBcIi4uL2ltYWdlcy9wcm9maWxlLWF2YXRhci5qcGVnXCI7XG5cbi8vIEltcG9ydCBwYWdlIGxvZ28gYW5kIHByb2ZpbGUgcGljdHVyZSBFbGVtZW50c1xuaW1wb3J0IHtcbiAgcGFnZUxvZ29FbGVtZW50LFxuICBwcm9maWxlUGljRWxlbWVudCB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuLy8gSW1wb3J0IHJlcXVpcmVkIGNvbnN0YW50cyBmcm9tIFVzZXIgUHJvZmlsZVxuaW1wb3J0IHtcbiAgZWRpdFByb2ZpbGVCdG4sXG4gIHByb2ZpbGVUaXRsZSxcbiAgcHJvZmlsZVN1YnRpdGxlLFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbi8vIEltcG9ydCByZXF1aXJlZCBjb25zdGFudHMgZnJvbSBFZGl0IFVzZXIgUHJvZmlsZSBQb3B1cFxuaW1wb3J0IHtcbiAgZWRpdFByb2ZpbGVQb3B1cEZvcm0sXG4gIGVkaXRQcm9maWxlTmFtZUlucHV0LFxuICBlZGl0UHJvZmlsZUFib3V0SW5wdXRcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG4vLyBJbXBvcnQgcmVxdWlyZWQgY29uc3RhbnRzIG5lZWRlZCBmb3IgYWRkaW5nIG5ldyBJbWFnZVxuaW1wb3J0IHsgYWRkSW1nQnRuIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG4vLyBJbXBvcnQgcmVxdWlyZWQgY29uc3RhbnRzIGZyb20gQWRkIE5ldyBJbWFnZSBQb3B1cFxuaW1wb3J0IHsgYWRkSW1nUG9wdXBGb3JtIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG4vLyBJbXBvcnQgRm9ybSBWYWxpZGF0aW9uIFNldHRpbmdzXG5pbXBvcnQgeyBmb3JtVmFsaWRhdGlvblNldHRpbmdzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG4vLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogLy9cbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2V0dGluZyBwaWN0dXJlcyBvbiB0aGUgd2VicGFnZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIC8vXG5cbi8vIFNldCBMb2dvIGFuZCBQcm9maWxlIFBpY3R1cmVcbnBhZ2VMb2dvRWxlbWVudC5zcmMgICA9IHBhZ2VMb2dvVXJsO1xucHJvZmlsZVBpY0VsZW1lbnQuc3JjID0gcHJvZmlsZVBpY1VybDtcblxuXG4vLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogLy9cbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGb3JtIFZhbGlkYXRpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIC8vXG4vLyBJbXBsZW1lbnQgZm9ybSB2YWxpZGF0aW9ucyBmb3IgYWxsIHRoZSBmb3Jtc1xuY29uc3QgZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yICA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1WYWxpZGF0aW9uU2V0dGluZ3MsIGVkaXRQcm9maWxlUG9wdXBGb3JtKTtcbmNvbnN0IGFkZEltZ0Zvcm1WYWxpZGF0b3IgICAgICAgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtVmFsaWRhdGlvblNldHRpbmdzLCBhZGRJbWdQb3B1cEZvcm0pO1xuZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmFkZEltZ0Zvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG4vLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogLy9cbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZCBJbnRpYWwgSW1hZ2UgQ2FyZHMgb24gUGFnZSBMb2FkICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIC8vXG4vLyBJbml0aWFsaXplIEltYWdlIFBvcHVwXG5jb25zdCBpbWdQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cF9yZWxfaW1hZ2VcIik7XG5pbWdQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyBGdW5jdGlvbiB0aGF0IHJldHVybnMgbmV3IEltYWdlIGNhcmRcbmNvbnN0IGdldE5ld0ltZ0NhcmQgPSBpdGVtID0+IHtcbiAgY29uc3QgbmV3SW1nQ2FyZFNldHR0aW5ncyA9IHtcbiAgICBjYXJkOiBpdGVtLFxuICAgIGhhbmRsZUNhcmRDbGljazogKG5hbWUsIGxpbmspID0+IHtcbiAgICAgIGltZ1BvcHVwLm9wZW4obmFtZSwgbGluayk7XG4gICAgfVxuICB9O1xuICBjb25zdCBuZXdJbWcgPSBuZXcgQ2FyZChuZXdJbWdDYXJkU2V0dHRpbmdzLCBcIiNlbGVtZW50LXRlbXBsYXRlXCIpO1xuICByZXR1cm4gbmV3SW1nO1xufVxuXG4vLyBGdW5jdGlvbiB0aGF0IHJlbmRlcnMgZWFjaCBpbWFnZSBjYXJkIHRvIHRoZSBET01cbmNvbnN0IHJlbmRlckltZ0NhcmQgPSBpdGVtID0+IHtcbiAgY29uc3QgbmV3SW1nQ2FyZEVsZW1lbnQgPSBnZXROZXdJbWdDYXJkKGl0ZW0pLmdlbmVyYXRlQ2FyZCgpO1xuICBpbWdDYXJkc0xpc3QuYWRkSXRlbShuZXdJbWdDYXJkRWxlbWVudCk7XG59XG5cbi8vIEFkZCBpbnRpYWwgY2FyZHMgb24gcGFnZSBsb2FkXG5jb25zdCBpbWdDYXJkc0xpc3QgPSBuZXcgU2VjdGlvbih7IGl0ZW1zOiBpbml0aWFsQ2FyZHMsIHJlbmRlcmVyOiByZW5kZXJJbWdDYXJkfSwgXCIuZWxlbWVudHNcIik7XG5pbWdDYXJkc0xpc3QucmVuZGVySXRlbXMoKTtcblxuLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIC8vXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZGQgSW50aWFsIFVzZXIgSW5mbyBvbiBQYWdlIExvYWQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAvL1xuXG4vLyBBZGQgdXNlciBpbmZvIG9uIHBhZ2UgbG9hZFxuY29uc3QgdXNlciA9IG5ldyBVc2VySW5mbyh7XG4gIHVzZXJUaXRsZVNlbGVjdG9yOiBcIi5wcm9maWxlX190aXRsZVwiLFxuICB1c2VyU3VidGl0bGVTZWxlY3RvcjogXCIucHJvZmlsZV9fc3VidGl0bGVcIn0pO1xuY29uc3QgY3VycmVudFVzZXJUaXRsZSAgICA9IHByb2ZpbGVUaXRsZS50ZXh0Q29udGVudDtcbmNvbnN0IGN1cnJlbnRVc2VyU3VidGl0bGUgPSBwcm9maWxlU3VidGl0bGUudGV4dENvbnRlbnQ7XG51c2VyLnNldFVzZXJJbmZvKGN1cnJlbnRVc2VyVGl0bGUsIGN1cnJlbnRVc2VyU3VidGl0bGUpO1xuXG4vLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogLy9cbi8vICAgICAgICAgICAgICAgICAgSW5pdGlhbGl6ZSBhbGwgUG9wdXBzIGFuZCBTZXQgRXZlbnQgTGlzdGVuZXJzIG9uIHRoZW0gICAgICAgICAgICAgICAgICAgICAgICAvL1xuLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIC8vXG5cbi8vIEluaXRpYWxpemUgRWRpdCBQcm9maWxlIFBvcHVwXG5jb25zdCBoYW5kbGVFZGl0UHJvZmlsZUZvcm1TdWJtaXQgPSAoe3RpdGxlLCBzdWJ0aXRsZX0pID0+e1xuICB1c2VyLnNldFVzZXJJbmZvKHRpdGxlLCBzdWJ0aXRsZSk7XG4gIGVkaXRQcm9maWxlUG9wdXAuY2xvc2UoKTtcbiAgZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG59XG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfcmVsX3Byb2ZpbGVcIiwgaGFuZGxlRWRpdFByb2ZpbGVGb3JtU3VibWl0KTtcbmVkaXRQcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gSW5pdGlhbGl6ZSBBZGQgSW1hZ2UgUG9wdXBcbmNvbnN0IGhhbmRsZUFkZEltZ0Zvcm1TdWJtaXQgPSAoe25hbWUsIGxpbmt9KSA9PiB7XG4gIGltZ0NhcmRzTGlzdC5hZGRJdGVtKGdldE5ld0ltZ0NhcmQoe25hbWUsIGxpbmt9KS5nZW5lcmF0ZUNhcmQoKSk7XG4gIGFkZEltZ1BvcHVwLmNsb3NlKCk7XG4gIGFkZEltZ0Zvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbn1cbmNvbnN0IGFkZEltZ1BvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfcmVsX3BsYWNlXCIsIGhhbmRsZUFkZEltZ0Zvcm1TdWJtaXQpO1xuYWRkSW1nUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIC8vXG4vLyAgICAgICAgICAgICAgICAgIFNldCBFdmVudCBMaXN0ZW5lcnMgb24gYWxsIHRoZSBidXR0b25zIG9uIHRoZSB3ZWJwYWdlICAgICAgICAgICAgICAgICAgICAgICAgLy9cbi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAvL1xuXG4vLyBBZGQgRXZlbnQgTGlzdGVuZXIgdG8gUHJvZmlsZSBFZGl0IEJ1dHRvblxuY29uc3QgaGFuZGxlRWRpdFByb2ZpbGUgPSAoKSA9PiB7XG4gIGNvbnN0IHt0aXRsZSwgc3VidGl0bGV9ID0gdXNlci5nZXRVc2VySW5mbygpO1xuICBlZGl0UHJvZmlsZU5hbWVJbnB1dC52YWx1ZSA9IHRpdGxlO1xuICBlZGl0UHJvZmlsZUFib3V0SW5wdXQudmFsdWUgPSBzdWJ0aXRsZTtcbiAgZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIGVkaXRQcm9maWxlUG9wdXAub3BlbigpO1xufVxuZWRpdFByb2ZpbGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUVkaXRQcm9maWxlKTtcblxuLy8gQWRkIEV2ZW50IExpc3RlbmVyIHRvIEFkZCBJbWFnZSBCdXR0b25cbmNvbnN0IGhhbmRsZUFkZEltZyA9ICgpID0+IHtcbiAgYWRkSW1nUG9wdXAub3BlbigpO1xuICBhZGRJbWdGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG59XG5hZGRJbWdCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUFkZEltZyk7Il0sIm5hbWVzIjpbIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwicCIsIkNhcmQiLCJjYXJkVGVtcGxhdGVTZWxlY3RvciIsImNhcmQiLCJoYW5kbGVDYXJkQ2xpY2siLCJlIiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiY2FyZFRvRGVsZXRlIiwiY2xvc2VzdCIsInJlbW92ZSIsInRoaXMiLCJfaW1nTmFtZSIsIm5hbWUiLCJfaW1nTGluayIsImxpbmsiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2NhcmRUZW1wbGF0ZVNlbGVjdG9yIiwiX2NhcmRFbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9jYXJkTGlrZUJ0biIsIl9jYXJkRGVsZXRlQnRuIiwiX2NhcmRJbWciLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VJY29uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfZ2V0VGVtcGxhdGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2FyZFRpdGxlIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybVZhbGlkYXRpb25TZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX2Zvcm1TZWxlY3RvciIsImZvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2J1dHRvbkVsZW1lbnQiLCJzb21lIiwiaW5wdXRFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZCIsImFkZCIsImVycm9yU3BhbkVsZW1lbnQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInByZXZlbnREZWZhdWx0IiwicmVzZXQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJrZXkiLCJjbG9zZSIsImNvbnRhaW5zIiwiX3BvcHVwIiwiX2hhbmRsZUNsaWNrQ2xvc2UiLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiUG9wdXBXaXRoRm9ybSIsImZvcm1Qb3B1cFNlbGVjdG9yIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2lucHV0RWxlbWVudHNMaXN0IiwiZm9ybVZhbHVlcyIsInZhbHVlIiwiX2dldElucHV0VmFsdWVzIiwiUG9wdXBXaXRoSW1hZ2UiLCJfcG9wdXBJbWdFbGVtZW50IiwiX3BvcHVwSW1nQ2FwdGlvbkVsZW1lbnQiLCJpbWdDYXB0aW9uIiwiaW1nTGluayIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZWxlbWVudCIsInByZXBlbmQiLCJpbm5lckhUTUwiLCJjbGVhciIsIlVzZXJJbmZvIiwidXNlclRpdGxlU2VsZWN0b3IiLCJ1c2VyU3VidGl0bGVTZWxlY3RvciIsIl91c2VyVGl0bGVFbGVtZW50IiwiX3VzZXJTdWJ0aXRsZUVsZW1lbnQiLCJ0aXRsZSIsInN1YnRpdGxlIiwiaW5pdGlhbENhcmRzIiwicGFnZUxvZ29FbGVtZW50IiwicHJvZmlsZVBpY0VsZW1lbnQiLCJlZGl0UHJvZmlsZUJ0biIsInByb2ZpbGVUaXRsZSIsInByb2ZpbGVTdWJ0aXRsZSIsImVkaXRQcm9maWxlUG9wdXBGb3JtIiwiZWRpdFByb2ZpbGVOYW1lSW5wdXQiLCJlZGl0UHJvZmlsZUFib3V0SW5wdXQiLCJhZGRJbWdCdG4iLCJhZGRJbWdQb3B1cEZvcm0iLCJwYWdlTG9nb1VybCIsInByb2ZpbGVQaWNVcmwiLCJlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJhZGRJbWdGb3JtVmFsaWRhdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiIsImltZ1BvcHVwIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJnZXROZXdJbWdDYXJkIiwiaXRlbSIsIm9wZW4iLCJpbWdDYXJkc0xpc3QiLCJuZXdJbWdDYXJkRWxlbWVudCIsImdlbmVyYXRlQ2FyZCIsImFkZEl0ZW0iLCJyZW5kZXJJdGVtcyIsInVzZXIiLCJjdXJyZW50VXNlclRpdGxlIiwiY3VycmVudFVzZXJTdWJ0aXRsZSIsInNldFVzZXJJbmZvIiwiZWRpdFByb2ZpbGVQb3B1cCIsImFkZEltZ1BvcHVwIiwiZ2V0VXNlckluZm8iXSwic291cmNlUm9vdCI6IiJ9