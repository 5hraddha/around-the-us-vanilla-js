!function(){"use strict";var e={892:function(e,t,n){e.exports=n.p+"db38627715f9cf8133bd.jpg"},455:function(e,t,n){e.exports=n.p+"83be7dc0176078180086.jpeg"},961:function(e,t,n){e.exports=n.p+"e76a38180f2289d431ba.jpeg"},694:function(e,t,n){e.exports=n.p+"eddff1fd71ff129390dd.jpeg"},801:function(e,t,n){e.exports=n.p+"ae1b38cc16456ed2157b.jpeg"},937:function(e,t,n){e.exports=n.p+"3755f99ca093e6e21308.svg"},685:function(e,t,n){e.exports=n.p+"1fb0ce54682a4a93df2b.jpeg"},923:function(e,t,n){e.exports=n.p+"28c59f2e18d4650c63b7.jpeg"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.p="",function(){function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(){function e(t,n){var o=t.card,i=t.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"_handleLikeIcon",(function(e){e.target.classList.toggle("element__like-btn_active")})),r(this,"_handleDeleteCard",(function(e){var t=e.target.closest(".element");t.remove(),t=null})),this._imgName=o.name,this._imgLink=o.link,this._handleCardClick=i,this._cardTemplateSelector=n}var n,o;return n=e,(o=[{key:"_getTemplate",value:function(){this._cardElement=document.querySelector(this._cardTemplateSelector).content.querySelector(".element").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this;this._cardLikeBtn=this._cardElement.querySelector(".element__like-btn"),this._cardDeleteBtn=this._cardElement.querySelector(".element__delete-btn"),this._cardImg=this._cardElement.querySelector(".element__img"),this._cardLikeBtn.addEventListener("click",this._handleLikeIcon),this._cardDeleteBtn.addEventListener("click",this._handleDeleteCard),this._cardImg.addEventListener("click",(function(){return e._handleCardClick(e._imgName,e._imgLink)}))}},{key:"generateCard",value:function(){return this._getTemplate(),this._setEventListeners(),this._cardTitle=this._cardElement.querySelector(".element__title"),this._cardImg.src=this._imgLink,this._cardImg.alt=this._imgName,this._cardTitle.textContent=this._imgName,this._cardElement}}])&&t(n.prototype,o),e}();function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSelector=t.formSelector,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formElement=n,this._inputList=function(e){if(Array.isArray(e))return i(e)}(r=this._formElement.querySelectorAll(this._inputSelector))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}var t,n;return t=e,(n=[{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.disabled=!0,this._buttonElement.classList.add(this._inactiveButtonClass)):(this._buttonElement.disabled=!1,this._buttonElement.classList.remove(this._inactiveButtonClass))}},{key:"_showInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));t.textContent=e.validationMessage,t.classList.add(this._errorClass),e.classList.add(this._inputErrorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));t.textContent="",t.classList.remove(this._errorClass),e.classList.remove(this._inputErrorClass)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_setEventListeners",value:function(){var e=this;this.toggleButtonState(),this._inputList.forEach((function(t){return t.addEventListener("input",(function(){e._checkInputValidity(t),e.toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){return e.preventDefault()})),this._setEventListeners()}},{key:"resetFormValidation",value:function(){this._formElement.reset()}}])&&u(t.prototype,n),e}(),c=l;function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close()})),s(this,"_handleClickClose",(function(e){e.target.classList.contains("popup_opened")&&n.close()})),this._popup=document.querySelector(t)}var t,n;return t=e,(n=[{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(".popup__close-btn").addEventListener("click",(function(){return e.close()}))}},{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("click",this._handleClickClose),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("click",this._handleClickClose),document.removeEventListener("keydown",this._handleEscClose)}}])&&a(t.prototype,n),e}();function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},d(e,t,n||e)}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function y(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(r);if(o){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return y(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._formElement=n._popup.querySelector(".popup__form"),n._handleFormSubmit=t,n}return t=u,(n=[{key:"_getInputValues",value:function(){var e;this._inputElementsList=function(e){if(Array.isArray(e))return h(e)}(e=this._formElement.querySelectorAll(".popup__input"))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();var t={};return this._inputElementsList.forEach((function(e){return t[e.name]=e.value})),t}},{key:"setEventListeners",value:function(){var e=this;d(v(u.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e._formElement.reset()}))}},{key:"close",value:function(){d(v(u.prototype),"close",this).call(this),this._formElement.reset()}}])&&_(t.prototype,n),u}(f);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},S(e,t,n||e)}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function C(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(o){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return C(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._popupImgElement=t._popup.querySelector(".popup__img"),t._popupImgCaptionElement=t._popup.querySelector(".popup__caption"),t}return t=u,(n=[{key:"open",value:function(e,t){this._popupImgCaptionElement.textContent=e,this._popupImgElement.src=t,this._popupImgElement.alt=e,S(w(u.prototype),"open",this).call(this)}}])&&E(t.prototype,n),u}(f);function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function e(t){var n=t.userTitleSelector,r=t.userSubtitleSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userTitleElement=document.querySelector(n),this._userSubtitleElement=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{title:this._userTitleElement.textContent,subtitle:this._userSubtitleElement.textContent}}},{key:"setUserInfo",value:function(e,t){this._userTitleElement.textContent=e,this._userSubtitleElement.textContent=t}}])&&j(t.prototype,n),e}(),I=n(937),q=n(685),x=(n(892),n(961),n(923),n(455),n(801),n(694),{formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit",inactiveButtonClass:"popup__submit_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"}),T=document.querySelector(".logo"),B=document.querySelector(".profile__avatar"),P=document.querySelector(".profile__edit-btn"),R=document.querySelector(".profile__title"),A=document.querySelector(".profile__subtitle"),U=document.querySelector(".popup_rel_profile").querySelector(".popup__form"),D=U.querySelector("#name-input"),V=U.querySelector("#about-input"),N=document.querySelector(".profile__add-btn"),F=document.querySelector(".popup_rel_place").querySelector(".popup__form"),M=new function t(n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e(this,"_checkResponseStatus",(function(e){e.ok?e.json():Promise.reject("Error: ".concat(e.status))})),e(this,"getInitialCards",(function(){return fetch("".concat(r._baseUrl,"/cards"),{headers:r._headers}).then((function(e){return r._checkResponseStatus(e)}))})),this._baseUrl=n.baseUrl,this._headers=n.headers}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"9bc9c0f1-5a8a-40aa-b985-20e7b24d1389","Content-Type":"application/json"}});T.src=I,B.src=q;var $=new c(x,U),z=new c(x,F);$.enableValidation(),z.enableValidation();var G=new L(".popup_rel_image");G.setEventListeners();var H=M.getInitialCards().then((function(e){console.log(e)})).catch((function(e){return console.log(e)}));H.renderItems();var J=new O({userTitleSelector:".profile__title",userSubtitleSelector:".profile__subtitle"}),K=R.textContent,Q=A.textContent;J.setUserInfo(K,Q);var W=new b(".popup_rel_profile",(function(e){var t=e.title,n=e.subtitle;J.setUserInfo(t,n),W.close(),$.toggleButtonState()}));W.setEventListeners();var X=new b(".popup_rel_place",(function(e){var t,n=e.name,r=e.link;H.addItem((t={name:n,link:r},new o({card:t,handleCardClick:function(e,t){G.open(e,t)}},"#element-template")).generateCard()),X.close(),z.toggleButtonState()}));X.setEventListeners(),P.addEventListener("click",(function(){var e=J.getUserInfo(),t=e.title,n=e.subtitle;D.value=t,V.value=n,$.toggleButtonState(),W.open()})),N.addEventListener("click",(function(){X.open(),z.toggleButtonState()}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEtBQ3JDc0gsRUFBYWUsU0FyRE9ELEVBcURlLENBQUN0SSxLQUFBQSxFQUFNRSxLQUFBQSxHQTlDM0IsSUFBSWYsRUFOUyxDQUMxQkUsS0FBTWlKLEVBQ05oSixnQkFBaUIsU0FBQ1UsRUFBTUUsR0FDdEJvSCxFQUFTa0IsS0FBS3hJLEVBQU1FLEtBR3FCLHNCQThDSXVJLGdCQUNqREosRUFBWXhFLFFBQ1p1RCxFQUFvQi9ELHVCQUd0QmdGLEVBQVlkLG9CQWNaOUIsRUFBZTVFLGlCQUFpQixTQVBOLFdBQ3hCLE1BQTBCbUgsRUFBS1UsY0FBeEJyRCxFQUFQLEVBQU9BLE1BQU9DLEVBQWQsRUFBY0EsU0FDZE8sRUFBcUJwQixNQUFRWSxFQUM3QlMsRUFBc0JyQixNQUFRYSxFQUM5QjZCLEVBQXlCOUQsb0JBQ3pCK0UsRUFBaUJJLFVBU25CekMsRUFBVWxGLGlCQUFpQixTQUpOLFdBQ25Cd0gsRUFBWUcsT0FDWnBCLEVBQW9CL0QsdUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsIi8qKlxuICogVGhpcyBtb2R1bGUgdGFrZXMgY2FyZSBvZiBjcmVhdGluZyBhIG5ldyBpbWFnZSBjYXJkIGVsZW1lbnRcbiAqIEBtb2R1bGUgQ2FyZFxuICovXG5cbi8qKiBDbGFzcyByZXByZXNlbnRpbmcgYW4gaW1hZ2UgY2FyZCBpbiB0aGUgd2VicGFnZSAqL1xuY2xhc3MgQ2FyZCB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IGltYWdlIGNhcmQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogLSBBbiBvYmplY3QgaGF2aW5nIG5ldyBpbWFnZSBjYXJkIGRldGFpbHMgYW5kIGEgY2FsbGJhY2sgdG8gaGFuZGxlIGNsaWNrIG9uIGFueSBpbWFnZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2FyZFRlbXBsYXRlU2VsZWN0b3IgLSAgVGhlIGNhcmQgdGVtcGxhdGUgZWxlbWVudCBzZWxlY3Rvci5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHtjYXJkLCBoYW5kbGVDYXJkQ2xpY2t9LCBjYXJkVGVtcGxhdGVTZWxlY3Rvcikge1xuICAgICh7IG5hbWUgICAgICAgICAgICA6IHRoaXMuX2ltZ05hbWUsXG4gICAgICBsaW5rICAgICAgICAgICAgIDogdGhpcy5faW1nTGluayB9ID0gY2FyZCk7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrICAgICAgID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIHRoaXMuX2NhcmRUZW1wbGF0ZVNlbGVjdG9yICA9IGNhcmRUZW1wbGF0ZVNlbGVjdG9yO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGltYWdlIGNhcmQgZWxlbWVudCBmcm9tIHRoZSBIVE1MIHRlbXBsYXRlLlxuICAgKi9cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRUZW1wbGF0ZVNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUgY2xpY2tpbmcgb2YgdGhlIGxpa2UgYnV0dG9uIG9uIHRoZSBpbWFnZSBjYXJkLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZSBUaGUgZGVmYXVsdCBldmVudCBvYmplY3QuXG4gICAqL1xuICBfaGFuZGxlTGlrZUljb24gPSBlID0+IHtcbiAgICBlLnRhcmdldFxuICAgICAgLmNsYXNzTGlzdFxuICAgICAgLnRvZ2dsZShcImVsZW1lbnRfX2xpa2UtYnRuX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSBkZWxldGlvbiBvZiB0aGUgaW1hZ2UgY2FyZCwgd2hlbiBkZWxldGUgaWNvbiBvbiB0aGUgaW1hZ2UgY2FyZCBpcyBjbGlja2VkLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZSBUaGUgZGVmYXVsdCBldmVudCBvYmplY3QuXG4gICAqL1xuICBfaGFuZGxlRGVsZXRlQ2FyZCA9IGUgPT4ge1xuICAgIGxldCBjYXJkVG9EZWxldGUgPSBlLnRhcmdldC5jbG9zZXN0KFwiLmVsZW1lbnRcIik7XG4gICAgY2FyZFRvRGVsZXRlLnJlbW92ZSgpO1xuICAgIGNhcmRUb0RlbGV0ZSA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBhbGwgdGhlIGV2ZW50IGxpc3RlbmVycyBvbiB0aGUgbmV3IGltYWdlIGNhcmQgZWxlbWVudFxuICAgKi9cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2NhcmRMaWtlQnRuICAgICA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZS1idG5cIik7XG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ0biAgID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19kZWxldGUtYnRuXCIpO1xuICAgIHRoaXMuX2NhcmRJbWcgICAgICAgICA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1nXCIpO1xuXG4gICAgdGhpcy5fY2FyZExpa2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUxpa2VJY29uKTtcbiAgICB0aGlzLl9jYXJkRGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKTtcbiAgICB0aGlzLl9jYXJkSW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5faW1nTmFtZSwgdGhpcy5faW1nTGluaykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyB0aGUgbmV3IGltYWdlIGNhcmQgZWxlbWVudCBhbmQgcG9wdWxhdGVzIGl0IHdpdGggdGhlIHJlcXVpcmVkIHZhbHVlcy5cbiAgICogQHJldHVybiB7T2JqZWN0fSBUaGUgbmV3IGltYWdlIGNhcmQgZWxlbWVudC5cbiAgICovXG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICB0aGlzLl9jYXJkVGl0bGUgICAgICAgICAgICAgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX3RpdGxlXCIpO1xuICAgIHRoaXMuX2NhcmRJbWcuc3JjICAgICAgICAgICA9IHRoaXMuX2ltZ0xpbms7XG4gICAgdGhpcy5fY2FyZEltZy5hbHQgICAgICAgICAgID0gdGhpcy5faW1nTmFtZTtcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9pbWdOYW1lO1xuXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcmQ7IiwiLyoqXG4gKiBUaGlzIG1vZHVsZSB0YWtlcyBjYXJlIG9mIGFsbCB0aGUgdmFsaWRhdGlvbnMgb2YgdGhlIGZvcm1zXG4gKiBAbW9kdWxlIEZvcm1WYWxpZGF0b3JcbiAqL1xuXG4vKiogQ2xhc3MgcmVwcmVzZW50aW5nIGEgZm9ybSB2YWxpZGF0b3IgKi9cbmNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBmb3JtIHZhbGlkYXRvci5cbiAgICogQHBhcmFtIHtPYmplY3R9IGZvcm1WYWxpZGF0aW9uU2V0dGluZ3MgLSBUaGUgb2JqZWN0IGhhdmluZyBhbGwgdGhlIHJlcXVpcmVkIHNldHRpbmdzIGZvciBmb3JtIHZhbGlkYXRpb24uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBmb3JtRWxlbWVudCAtICBUaGUgZm9ybSBlbGVtZW50IHRoYXQgaGFzIHRvIGJlIHZhbGlkYXRlZC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGZvcm1WYWxpZGF0aW9uU2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XG4gICAgKHsgZm9ybVNlbGVjdG9yICAgICAgICAgICA6IHRoaXMuX2Zvcm1TZWxlY3RvcixcbiAgICAgIGlucHV0U2VsZWN0b3IgICAgICAgICAgIDogdGhpcy5faW5wdXRTZWxlY3RvcixcbiAgICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yICAgIDogdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IsXG4gICAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzICAgICA6IHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MsXG4gICAgICBpbnB1dEVycm9yQ2xhc3MgICAgICAgICA6IHRoaXMuX2lucHV0RXJyb3JDbGFzcyxcbiAgICAgIGVycm9yQ2xhc3MgICAgICAgICAgICAgIDogdGhpcy5fZXJyb3JDbGFzcyB9ID0gZm9ybVZhbGlkYXRpb25TZXR0aW5ncyk7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgICAgICAgICA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2lucHV0TGlzdCAgICAgICAgICAgPSBbLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCAgICAgICA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9XG5cbiAgLyoqXG4gICAqICBDaGVja3MgaWYgYWxsIHRoZSBJbnB1dCBFbGVtZW50cyBhcmUgdmFsaWQgYXQgdGhlIG1vbWVudC5cbiAgICogIEByZXR1cm5zIHtCb29sZWFufSB0cnVlL2ZhbHNlXG4gICAqL1xuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZShpbnB1dEVsZW1lbnQgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XG4gIH1cblxuICAvKipcbiAgICogIFRvZ2dsZXMgdGhlIHN0YXRlIChhY3RpdmUgb3IgaW5hY3RpdmUpIG9mIHRoZSBTdWJtaXQgYnV0dG9uLlxuICAgKi9cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqICBTaG93cyB0aGUgZXJyb3IgbWVzc2FnZSBhbmQgY2hhbmdlIHRoZSBJbnB1dCBFbGVtZW50IHN0eWxlXG4gICAqICBAcGFyYW0ge09iamVjdH0gaW5wdXRFbGVtZW50IFRoZSBhY3RpdmUgaW5wdXQgZWxlbWVudCBhdCB0aGUgbW9tZW50LlxuICAgKi9cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yU3BhbkVsZW1lbnQgICAgICAgID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGVycm9yU3BhbkVsZW1lbnQudGV4dENvbnRlbnQgID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yU3BhbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICB9XG5cbiAgLyoqXG4gICAqICBIaWRlcyB0aGUgZXJyb3IgbWVzc2FnZSBhbmQgY2hhbmdlIHRoZSBJbnB1dCBFbGVtZW50IHN0eWxlXG4gICAqICBAcGFyYW0ge09iamVjdH0gaW5wdXRFbGVtZW50IFRoZSBhY3RpdmUgaW5wdXQgZWxlbWVudCBhdCB0aGUgbW9tZW50LlxuICAgKi9cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yU3BhbkVsZW1lbnQgICAgICAgID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGVycm9yU3BhbkVsZW1lbnQudGV4dENvbnRlbnQgID0gXCJcIjtcbiAgICBlcnJvclNwYW5FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiAgQ2hlY2tzIGlmIHRoZSBjb250ZW50IG9mIHRoZSBJbnB1dCBFbGVtZW50IGlzIHZhbGlkIGF0IHRoZSBtb21lbnQgYW5kIGhpZGUgb3Igc2hvdyBlcnJvcnMgYWNjb3JkaW5nbHlcbiAgICogIEBwYXJhbSB7T2JqZWN0fSBpbnB1dEVsZW1lbnQgVGhlIGFjdGl2ZSBpbnB1dCBlbGVtZW50IGF0IHRoZSBtb21lbnQuXG4gICAqL1xuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmKGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCl7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiAgRmluZHMgYWxsIHRoZSBmaWVsZHMgb2YgdGhlIGZvcm0gYW5kIHNldCAnaW5wdXQnIGV2ZW50IGxpc3RlbmVyXG4gICAqL1xuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKCBpbnB1dEVsZW1lbnQgPT4gXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiAgRW5hYmxlcyBhbGwgdGhlIHZhbGlkYXRpb25zIGZvciB0aGUgY3VycmVudCBmb3JtXG4gICAqL1xuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZSA9PiBlLnByZXZlbnREZWZhdWx0KCkpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICAvKipcbiAgICogIFJlc2V0cyBmb3JtIHZhbGlkYXRpb24gaW4gdGhlIGN1cnJlbnQgZm9ybS5cbiAgICovXG4gIHJlc2V0Rm9ybVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcbiAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7IiwiLyoqXG4gKiBUaGlzIG1vZHVsZSB0YWtlcyBjYXJlIG9mIGdlbmVyaWMgZnVuY3Rpb25hbGl0aWVzIG9mIGEgcG9wdXAsIGxpa2Ugb3BlbmluZyBhbmQgY2xvc2luZyBvZiBhIHBvcHVwIHdpbmRvd1xuICogQG1vZHVsZSBQb3B1cFxuICovXG5cbi8qKiBDbGFzcyByZXByZXNlbnRpbmcgYSBQb3B1cCBjb21wb25lbnQgdGhhdCBoYXMgZnVuY3Rpb25hbGl0eSB0byBvcGVuIGFuZCBjbG9zZSB0aGUgcG9wdXAgd2luZG93LiAqL1xuY2xhc3MgUG9wdXAge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBQb3B1cCBjb21wb25lbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwb3B1cFNlbGVjdG9yIC0gIFRoZSBDU1MgY2xhc3Mgc2VsZWN0b3IgdG8gc2VsZWN0IHRoZSBwb3B1cCB3aW5kb3cuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXAgICAgICAgICAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUgY2xvc2luZyBvZiB0aGUgb3BlbmVkIHBvcHVwIGJ5IHByZXNzaW5nIEVzY2FwZSBrZXkuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBlIFRoZSBkZWZhdWx0IGV2ZW50IG9iamVjdC5cbiAgICovXG4gIF9oYW5kbGVFc2NDbG9zZSA9IGUgPT4ge1xuICAgIGlmKGUua2V5ID09PSBcIkVzY2FwZVwiKXtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUgY2xvc2luZyBvZiB0aGUgb3BlbmVkIHBvcHVwIGJ5IG1vdXNlIGNsaWNrIG9uIG92ZXJsYXkgb3V0c2lkZSB0aGUgYm9yZGVycyBvZiB0aGUgcG9wdXAgaXRzZWxmLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZSBUaGUgZGVmYXVsdCBldmVudCBvYmplY3QuXG4gICAqL1xuICBfaGFuZGxlQ2xpY2tDbG9zZSA9IGUgPT4ge1xuICAgIGlmKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX29wZW5lZFwiKSl7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgYWxsIHRoZSBldmVudCBsaXN0ZW5lcnMgb24gdGhlIHBvcHVwIHdpbmRvd1xuICAgKi9cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgcG9wdXBDbG9zZUJ0biA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWJ0blwiKTtcbiAgICBwb3B1cENsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIE9wZW5zIHRoZSBwb3B1cCBhbmQgYXR0YWNoZXMgdGhlIHJlcXVpcmVkIGV2ZW50IGxpc3RlbmVycy5cbiAgICovXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2xpY2tDbG9zZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlcyB0aGUgcG9wdXAgYW5kIHJlbW92ZXMgdGhlIHJlcXVpcmVkIGV2ZW50IGxpc3RlbmVycy5cbiAgICovXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUNsaWNrQ2xvc2UpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cDsiLCIvKipcbiAqIFRoaXMgbW9kdWxlIHRha2VzIGNhcmUgb2Ygc3BlY2lmaWMgZnVuY3Rpb25hbGl0aWVzIG9mIGEgUG9wdXAgd2l0aCBhIEZvcm0gZWxlbWVudC5cbiAqIEBtb2R1bGUgUG9wdXBXaXRoRm9ybVxuICovXG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuLyoqIENsYXNzIGV4dGVuZGluZyBmcm9tIHRoZSBwYXJlbnQgUG9wdXAgY29tcG9uZW50IHRvIGltcGxlbWVudCB0aGUgZnVuY3Rpb25hbGl0aWVzIHNwZWNpZmljIHRvIHRoZSBGb3JtIFBvcHVwIENvbXBvbmVudCAqL1xuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgRm9ybSBQb3B1cCBjb21wb25lbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmb3JtUG9wdXBTZWxlY3RvciAtICBUaGUgQ1NTIGNsYXNzIHNlbGVjdG9yIHRvIHNlbGVjdCB0aGUgZm9ybSBwb3B1cCB3aW5kb3cuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oT2JqZWN0KX0gaGFuZGxlRm9ybVN1Ym1pdCAtIFRoZSBmdW5jdGlvbiB0aGF0IGhhbmRsZXMgdGhlIGZvcm0ncyBgc3VibWl0YCBldmVudFxuICAgKi9cbiAgY29uc3RydWN0b3IoZm9ybVBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcihmb3JtUG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYWxsIHRoZSB2YWx1ZXMgb2YgdGhlIGlucHV0IGVsZW1lbnRzIG9mIHRoZSBmb3JtLlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBBbiBvYmplY3QgaGF2aW5nIGFsbCB0aGUgdmFsdWVzIG9mIHRoZSBmb3JtIGZpZWxkcy5cbiAgICovXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzTGlzdCA9IFsuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKV07XG4gICAgY29uc3QgZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHNMaXN0LmZvckVhY2goXG4gICAgICBpbnB1dEVsZW1lbnQgPT4gXG4gICAgICAgIGZvcm1WYWx1ZXNbaW5wdXRFbGVtZW50Lm5hbWVdID0gaW5wdXRFbGVtZW50LnZhbHVlXG4gICAgKTtcbiAgICByZXR1cm4gZm9ybVZhbHVlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGFsbCB0aGUgZXZlbnQgbGlzdGVuZXJzIG9uIHRoZSBwb3B1cCB3aW5kb3cgd2l0aCBmb3JtXG4gICAqL1xuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbG9zZXMgdGhlIHBvcHVwIHdpdGggZm9ybSwgcmVtb3ZlcyB0aGUgcmVxdWlyZWQgZXZlbnQgbGlzdGVuZXJzIGFuZCByZXNldHMgdGhlIGZvcm0gZmllbGRzLlxuICAgKi9cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEZvcm07IiwiLyoqXG4gKiBUaGlzIG1vZHVsZSB0YWtlcyBjYXJlIG9mIGFkZGluZyBhbiBpbWFnZSB0byB0aGUgcG9wdXAgd2l0aCBpdHMgc3JjIGF0dHJpYnV0ZSBhbmQgY2FwdGlvbi5cbiAqIEBtb2R1bGUgUG9wdXBXaXRoSW1hZ2VcbiAqL1xuaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbi8qKiBDbGFzcyBleHRlbmRpbmcgZnJvbSB0aGUgcGFyZW50IFBvcHVwIGNvbXBvbmVudCB0byBpbXBsZW1lbnQgdGhlIGZ1bmN0aW9uYWxpdGllcyBzcGVjaWZpYyB0byB0aGUgSW1hZ2UgUG9wdXAgQ29tcG9uZW50ICovXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgSW1hZ2UgUG9wdXAgY29tcG9uZW50LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcG9wdXBTZWxlY3RvciAtICBUaGUgQ1NTIGNsYXNzIHNlbGVjdG9yIHRvIHNlbGVjdCB0aGUgaW1hZ2UgcG9wdXAgd2luZG93LlxuICAgKi9cbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwSW1nRWxlbWVudCAgICAgICAgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWdcIik7XG4gICAgdGhpcy5fcG9wdXBJbWdDYXB0aW9uRWxlbWVudCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2NhcHRpb25cIik7XG4gIH1cblxuICAvKipcbiAgICogT3BlbnMgdGhlIGltYWdlIHBvcHVwIGFuZCBzZXRzIHRoZSBpbWFnZSBjYXB0aW9uIGFuZCBsaW5rLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaW1nQ2FwdGlvbiAtICBUaGUgY2FwdGlvbiBvZiB0aGUgaW1hZ2UgdG8gYmUgcHJldmlld2VkIG9yIG9wZW5lZC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGltZ0xpbmsgLSAgVGhlIHVybCBvciBsaW5rIG9mIHRoZSBpbWFnZSB0byBiZSBwcmV2aWV3ZWQgb3Igb3BlbmVkLlxuICAgKi9cbiAgb3BlbihpbWdDYXB0aW9uLCBpbWdMaW5rKSB7XG4gICAgdGhpcy5fcG9wdXBJbWdDYXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IGltZ0NhcHRpb247XG4gICAgdGhpcy5fcG9wdXBJbWdFbGVtZW50LnNyYyAgICAgICAgICAgICAgICA9IGltZ0xpbms7XG4gICAgdGhpcy5fcG9wdXBJbWdFbGVtZW50LmFsdCAgICAgICAgICAgICAgICA9IGltZ0NhcHRpb247XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlOyIsIi8qKlxuICogVGhpcyBtb2R1bGUgdGFrZXMgY2FyZSBvZiByZW5kZXJpbmcgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHVzZXIgb24gdGhlIHBhZ2UuXG4gKiBAbW9kdWxlIFVzZXJJbmZvXG4gKi9cblxuLyoqIENsYXNzIGlzIHJlc3BvbnNpYmxlIGZvciByZW5kZXJpbmcgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHVzZXIgb24gdGhlIHBhZ2UuICovXG5jbGFzcyBVc2VySW5mbyB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IFVzZXJJbmZvIGNvbXBvbmVudC5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9iaiAtICBBbiBvYmplY3Qgd2l0aCB0aGUgc2VsZWN0b3JzIG9mIHR3byBlbGVtZW50czogb25lIGNvbnRhaW5pbmcgdGhlIHVzZXIncyBuYW1lLCBhbmQgYW5vdGhlciBjb250YWluaW5nIHRoZSB1c2VyJ3Mgam9iLlxuICAgKi9cbiAgY29uc3RydWN0b3Ioe3VzZXJUaXRsZVNlbGVjdG9yLCB1c2VyU3VidGl0bGVTZWxlY3Rvcn0pIHtcbiAgICB0aGlzLl91c2VyVGl0bGVFbGVtZW50ICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJUaXRsZVNlbGVjdG9yKTtcbiAgICB0aGlzLl91c2VyU3VidGl0bGVFbGVtZW50ICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJTdWJ0aXRsZVNlbGVjdG9yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgdXNlci4gXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IEFuIG9iamVjdCB3aXRoIGluZm9ybWF0aW9uIGFib3V0IHRoZSB1c2VyLiBcbiAgICovXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIGNvbnN0IHVzZXJEYXRhID0ge1xuICAgICAgdGl0bGU6IHRoaXMuX3VzZXJUaXRsZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBzdWJ0aXRsZTogdGhpcy5fdXNlclN1YnRpdGxlRWxlbWVudC50ZXh0Q29udGVudFxuICAgIH07XG4gICAgcmV0dXJuIHVzZXJEYXRhO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIG5ldyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgdXNlci4gXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0aXRsZSAtIFRoZSBuZXcgbmFtZSBvciB0aXRsZSBvZiB0aGUgdXNlci5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHN1YnRpdGxlIC0gVGhlIG5ldyBqb2Igb3Igc3VidGl0bGUgb2YgdGhlIHVzZXIuXG4gICAqL1xuICBzZXRVc2VySW5mbyh0aXRsZSwgc3VidGl0bGUpIHtcbiAgICB0aGlzLl91c2VyVGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgdGhpcy5fdXNlclN1YnRpdGxlRWxlbWVudC50ZXh0Q29udGVudCA9IHN1YnRpdGxlO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvOyIsIi8vIEltcG9ydCBhbGwgdGhlIGltYWdlc1xuaW1wb3J0IGFudGVsb3BlQ2FueW9uSW1nVXJsICAgICBmcm9tIFwiLi4vaW1hZ2VzL2FudGVsb3BlLWNhbnlvbi1hcml6b25hLmpwZ1wiO1xuaW1wb3J0IGNhcGVIYXR0ZXJhc0ltZ1VybCAgICAgICBmcm9tIFwiLi4vaW1hZ2VzL2NhcGUtaGF0dGVyYXMtbGlnaHRob3VzZS1ub3J0aC1jYXJvbGluYS5qcGVnXCI7XG5pbXBvcnQgc2hlbmFuZG9haEltZ1VybCAgICAgICAgIGZyb20gXCIuLi9pbWFnZXMvc2hlbmFuZG9haC1uYXRpb25hbC1wYXJrLmpwZWdcIjtcbmltcG9ydCBiaWdTdXJJbWdVcmwgICAgICAgICAgICAgZnJvbSBcIi4uL2ltYWdlcy9iaWctc3VyLWNhbGlmb3JuaWEuanBlZ1wiO1xuaW1wb3J0IGtpbGxpbmd0b25JbWdVcmwgICAgICAgICBmcm9tIFwiLi4vaW1hZ2VzL2tpbGxpbmd0b24tdmVybW9udC5qcGVnXCI7XG5pbXBvcnQga2V5V2VzdEltZ1VybCAgICAgICAgICAgIGZyb20gXCIuLi9pbWFnZXMva2V5LXdlc3QtZmxvcmlkYS5qcGVnXCI7XG5cbi8vIEluaXRpYWwgQ2FyZHMgdG8gc2hvdyB3aGlsZSB0aGUgcGFnZSBsb2Fkc1xuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiQW50ZWxvcGUgQ2FueW9uXCIsXG4gICAgbGluazogYW50ZWxvcGVDYW55b25JbWdVcmxcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQ2FwZSBIYXR0ZXJhcyBMaWdodGhvdXNlXCIsXG4gICAgbGluazogY2FwZUhhdHRlcmFzSW1nVXJsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlNoZW5hbmRvYWggTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IHNoZW5hbmRvYWhJbWdVcmxcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmlnIFN1clwiLFxuICAgIGxpbms6IGJpZ1N1ckltZ1VybFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJLaWxsaW5ndG9uIFZlcm1vbnRcIixcbiAgICBsaW5rOiBraWxsaW5ndG9uSW1nVXJsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIktleSBXZXN0XCIsXG4gICAgbGluazoga2V5V2VzdEltZ1VybFxuICB9XG5dO1xuXG4vLyBTZXR0aW5ncyBuZWVkZWQgZm9yIGZvcm0gdmFsaWRhdGlvblxuZXhwb3J0IGNvbnN0IGZvcm1WYWxpZGF0aW9uU2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvciAgICAgICAgOiBcIi5wb3B1cF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yICAgICAgIDogXCIucG9wdXBfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fc3VibWl0XCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3MgOiBcInBvcHVwX19zdWJtaXRfZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzICAgICA6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzcyAgICAgICAgICA6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIlxufTtcblxuLy8gU2VsZWN0IHBhZ2UgbG9nbyBhbmQgcHJvZmlsZSBwaWN0dXJlIEVsZW1lbnRzXG5leHBvcnQgY29uc3QgcGFnZUxvZ29FbGVtZW50ICAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubG9nb1wiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlUGljRWxlbWVudCAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XG5cbi8vIFNlbGVjdCByZXF1aXJlZCBET00gRWxlbWVudHMgZnJvbSBVc2VyIFByb2ZpbGVcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZUJ0biAgICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ0blwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGUgICAgICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlU3VidGl0bGUgICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19zdWJ0aXRsZVwiKTtcblxuLy8gU2VsZWN0IHJlcXVpcmVkIERPTSBFbGVtZW50cyBmcm9tIEVkaXQgVXNlciBQcm9maWxlIFBvcHVwXG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVQb3B1cCAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfcmVsX3Byb2ZpbGVcIik7XG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVQb3B1cEZvcm0gICA9IGVkaXRQcm9maWxlUG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZU5hbWVJbnB1dCAgID0gZWRpdFByb2ZpbGVQb3B1cEZvcm0ucXVlcnlTZWxlY3RvcihcIiNuYW1lLWlucHV0XCIpO1xuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlQWJvdXRJbnB1dCAgPSBlZGl0UHJvZmlsZVBvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKFwiI2Fib3V0LWlucHV0XCIpO1xuXG4vLyBTZWxlY3QgcmVxdWlyZWQgRE9NIEVsZW1lbnRzIGZvciBhZGRpbmcgbmV3IEltYWdlXG5leHBvcnQgY29uc3QgYWRkSW1nQnRuICAgICAgICAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ0blwiKTtcblxuLy8gU2VsZWN0IHJlcXVpcmVkIERPTSBFbGVtZW50cyBmcm9tIEFkZCBOZXcgSW1hZ2UgUG9wdXBcbmV4cG9ydCBjb25zdCBhZGRJbWdQb3B1cCAgICAgICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9yZWxfcGxhY2VcIik7XG5leHBvcnQgY29uc3QgYWRkSW1nUG9wdXBGb3JtICAgICAgICA9IGFkZEltZ1BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7IiwiLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIC8vXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSW1wb3J0IE1vZHVsZXMgYW5kIENvbnN0YW50cyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAvL1xuLy8gSW1wb3J0IG1haW4gc3R5bGVzaGVldFxuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XG5cbi8vIEltcG9ydCBtb2R1bGVzXG5pbXBvcnQgQXBpICAgICAgICAgICAgICAgICAgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XG5pbXBvcnQgQ2FyZCAgICAgICAgICAgICAgICAgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgICAgICAgIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtICAgICAgICBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgICAgICAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2VcIjtcbmltcG9ydCBTZWN0aW9uICAgICAgICAgICAgICBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gICAgICAgICAgICAgZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIlxuXG4vLyBJbXBvcnQgSW5pdGlhbCBDYXJkIERhdGFcbi8vIGltcG9ydCB7IGluaXRpYWxDYXJkcyB9ICAgICAgIGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuLy8gSW1wb3J0IGxvZ28gYW5kIHByb2ZpbGUgcGljdHVyZVxuaW1wb3J0IHBhZ2VMb2dvVXJsICAgICAgICAgIGZyb20gXCIuLi9pbWFnZXMvbG9nby5zdmdcIjtcbmltcG9ydCBwcm9maWxlUGljVXJsICAgICAgICBmcm9tIFwiLi4vaW1hZ2VzL3Byb2ZpbGUtYXZhdGFyLmpwZWdcIjtcblxuLy8gSW1wb3J0IHBhZ2UgbG9nbyBhbmQgcHJvZmlsZSBwaWN0dXJlIEVsZW1lbnRzXG5pbXBvcnQge1xuICBpbml0aWFsQ2FyZHMsXG4gIHBhZ2VMb2dvRWxlbWVudCxcbiAgcHJvZmlsZVBpY0VsZW1lbnQgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbi8vIEltcG9ydCByZXF1aXJlZCBjb25zdGFudHMgZnJvbSBVc2VyIFByb2ZpbGVcbmltcG9ydCB7XG4gIGVkaXRQcm9maWxlQnRuLFxuICBwcm9maWxlVGl0bGUsXG4gIHByb2ZpbGVTdWJ0aXRsZSxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG4vLyBJbXBvcnQgcmVxdWlyZWQgY29uc3RhbnRzIGZyb20gRWRpdCBVc2VyIFByb2ZpbGUgUG9wdXBcbmltcG9ydCB7XG4gIGVkaXRQcm9maWxlUG9wdXBGb3JtLFxuICBlZGl0UHJvZmlsZU5hbWVJbnB1dCxcbiAgZWRpdFByb2ZpbGVBYm91dElucHV0XG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuLy8gSW1wb3J0IHJlcXVpcmVkIGNvbnN0YW50cyBuZWVkZWQgZm9yIGFkZGluZyBuZXcgSW1hZ2VcbmltcG9ydCB7IGFkZEltZ0J0biB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuLy8gSW1wb3J0IHJlcXVpcmVkIGNvbnN0YW50cyBmcm9tIEFkZCBOZXcgSW1hZ2UgUG9wdXBcbmltcG9ydCB7IGFkZEltZ1BvcHVwRm9ybSB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuLy8gSW1wb3J0IEZvcm0gVmFsaWRhdGlvbiBTZXR0aW5nc1xuaW1wb3J0IHsgZm9ybVZhbGlkYXRpb25TZXR0aW5ncyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIC8vXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVzdGFibGlzaCBjb25uZWN0aW9uIHdpdGggQVBJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAvL1xuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMlwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCI5YmM5YzBmMS01YThhLTQwYWEtYjk4NS0yMGU3YjI0ZDEzODlcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICB9XG59KTtcblxuLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIC8vXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNldHRpbmcgcGljdHVyZXMgb24gdGhlIHdlYnBhZ2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAvL1xuXG4vLyBTZXQgTG9nbyBhbmQgUHJvZmlsZSBQaWN0dXJlXG5wYWdlTG9nb0VsZW1lbnQuc3JjICAgPSBwYWdlTG9nb1VybDtcbnByb2ZpbGVQaWNFbGVtZW50LnNyYyA9IHByb2ZpbGVQaWNVcmw7XG5cblxuLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIC8vXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRm9ybSBWYWxpZGF0aW9ucyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAvL1xuLy8gSW1wbGVtZW50IGZvcm0gdmFsaWRhdGlvbnMgZm9yIGFsbCB0aGUgZm9ybXNcbmNvbnN0IGVkaXRQcm9maWxlRm9ybVZhbGlkYXRvciAgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtVmFsaWRhdGlvblNldHRpbmdzLCBlZGl0UHJvZmlsZVBvcHVwRm9ybSk7XG5jb25zdCBhZGRJbWdGb3JtVmFsaWRhdG9yICAgICAgID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVZhbGlkYXRpb25TZXR0aW5ncywgYWRkSW1nUG9wdXBGb3JtKTtcbmVkaXRQcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5hZGRJbWdGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIC8vXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZGQgSW50aWFsIEltYWdlIENhcmRzIG9uIFBhZ2UgTG9hZCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAvL1xuLy8gSW5pdGlhbGl6ZSBJbWFnZSBQb3B1cFxuY29uc3QgaW1nUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfcmVsX2ltYWdlXCIpO1xuaW1nUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gRnVuY3Rpb24gdGhhdCByZXR1cm5zIG5ldyBJbWFnZSBjYXJkXG5jb25zdCBnZXROZXdJbWdDYXJkID0gaXRlbSA9PiB7XG4gIGNvbnN0IG5ld0ltZ0NhcmRTZXR0dGluZ3MgPSB7XG4gICAgY2FyZDogaXRlbSxcbiAgICBoYW5kbGVDYXJkQ2xpY2s6IChuYW1lLCBsaW5rKSA9PiB7XG4gICAgICBpbWdQb3B1cC5vcGVuKG5hbWUsIGxpbmspO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgbmV3SW1nID0gbmV3IENhcmQobmV3SW1nQ2FyZFNldHR0aW5ncywgXCIjZWxlbWVudC10ZW1wbGF0ZVwiKTtcbiAgcmV0dXJuIG5ld0ltZztcbn1cblxuLy8gRnVuY3Rpb24gdGhhdCByZW5kZXJzIGVhY2ggaW1hZ2UgY2FyZCB0byB0aGUgRE9NXG5jb25zdCByZW5kZXJJbWdDYXJkID0gaXRlbSA9PiB7XG4gIGNvbnN0IG5ld0ltZ0NhcmRFbGVtZW50ID0gZ2V0TmV3SW1nQ2FyZChpdGVtKS5nZW5lcmF0ZUNhcmQoKTtcbiAgaW1nQ2FyZHNMaXN0LmFkZEl0ZW0obmV3SW1nQ2FyZEVsZW1lbnQpO1xufVxuXG4vLyBBZGQgaW50aWFsIGNhcmRzIG9uIHBhZ2UgbG9hZFxuY29uc3QgaW1nQ2FyZHNMaXN0ID0gYXBpLmdldEluaXRpYWxDYXJkcygpXG4gIC50aGVuKGluaXRpYWxDYXJkcyA9PiB7XG4gICAgICAvLyByZXR1cm4gKG5ldyBTZWN0aW9uKHsgaXRlbXM6IGluaXRpYWxDYXJkcywgcmVuZGVyZXI6IHJlbmRlckltZ0NhcmR9LCBcIi5lbGVtZW50c1wiKSk7XG4gICAgICBjb25zb2xlLmxvZyhpbml0aWFsQ2FyZHMpO1xuICB9KVxuICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xuaW1nQ2FyZHNMaXN0LnJlbmRlckl0ZW1zKCk7XG5cbi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAvL1xuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkIEludGlhbCBVc2VyIEluZm8gb24gUGFnZSBMb2FkICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4vLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogLy9cblxuLy8gQWRkIHVzZXIgaW5mbyBvbiBwYWdlIGxvYWRcbmNvbnN0IHVzZXIgPSBuZXcgVXNlckluZm8oe1xuICB1c2VyVGl0bGVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgdXNlclN1YnRpdGxlU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3N1YnRpdGxlXCJ9KTtcbmNvbnN0IGN1cnJlbnRVc2VyVGl0bGUgICAgPSBwcm9maWxlVGl0bGUudGV4dENvbnRlbnQ7XG5jb25zdCBjdXJyZW50VXNlclN1YnRpdGxlID0gcHJvZmlsZVN1YnRpdGxlLnRleHRDb250ZW50O1xudXNlci5zZXRVc2VySW5mbyhjdXJyZW50VXNlclRpdGxlLCBjdXJyZW50VXNlclN1YnRpdGxlKTtcblxuLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIC8vXG4vLyAgICAgICAgICAgICAgICAgIEluaXRpYWxpemUgYWxsIFBvcHVwcyBhbmQgU2V0IEV2ZW50IExpc3RlbmVycyBvbiB0aGVtICAgICAgICAgICAgICAgICAgICAgICAgLy9cbi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAvL1xuXG4vLyBJbml0aWFsaXplIEVkaXQgUHJvZmlsZSBQb3B1cFxuY29uc3QgaGFuZGxlRWRpdFByb2ZpbGVGb3JtU3VibWl0ID0gKHt0aXRsZSwgc3VidGl0bGV9KSA9PntcbiAgdXNlci5zZXRVc2VySW5mbyh0aXRsZSwgc3VidGl0bGUpO1xuICBlZGl0UHJvZmlsZVBvcHVwLmNsb3NlKCk7XG4gIGVkaXRQcm9maWxlRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xufVxuY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX3JlbF9wcm9maWxlXCIsIGhhbmRsZUVkaXRQcm9maWxlRm9ybVN1Ym1pdCk7XG5lZGl0UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIEluaXRpYWxpemUgQWRkIEltYWdlIFBvcHVwXG5jb25zdCBoYW5kbGVBZGRJbWdGb3JtU3VibWl0ID0gKHtuYW1lLCBsaW5rfSkgPT4ge1xuICBpbWdDYXJkc0xpc3QuYWRkSXRlbShnZXROZXdJbWdDYXJkKHtuYW1lLCBsaW5rfSkuZ2VuZXJhdGVDYXJkKCkpO1xuICBhZGRJbWdQb3B1cC5jbG9zZSgpO1xuICBhZGRJbWdGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG59XG5jb25zdCBhZGRJbWdQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX3JlbF9wbGFjZVwiLCBoYW5kbGVBZGRJbWdGb3JtU3VibWl0KTtcbmFkZEltZ1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAvL1xuLy8gICAgICAgICAgICAgICAgICBTZXQgRXZlbnQgTGlzdGVuZXJzIG9uIGFsbCB0aGUgYnV0dG9ucyBvbiB0aGUgd2VicGFnZSAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4vLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogLy9cblxuLy8gQWRkIEV2ZW50IExpc3RlbmVyIHRvIFByb2ZpbGUgRWRpdCBCdXR0b25cbmNvbnN0IGhhbmRsZUVkaXRQcm9maWxlID0gKCkgPT4ge1xuICBjb25zdCB7dGl0bGUsIHN1YnRpdGxlfSA9IHVzZXIuZ2V0VXNlckluZm8oKTtcbiAgZWRpdFByb2ZpbGVOYW1lSW5wdXQudmFsdWUgPSB0aXRsZTtcbiAgZWRpdFByb2ZpbGVBYm91dElucHV0LnZhbHVlID0gc3VidGl0bGU7XG4gIGVkaXRQcm9maWxlRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICBlZGl0UHJvZmlsZVBvcHVwLm9wZW4oKTtcbn1cbmVkaXRQcm9maWxlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVFZGl0UHJvZmlsZSk7XG5cbi8vIEFkZCBFdmVudCBMaXN0ZW5lciB0byBBZGQgSW1hZ2UgQnV0dG9uXG5jb25zdCBoYW5kbGVBZGRJbWcgPSAoKSA9PiB7XG4gIGFkZEltZ1BvcHVwLm9wZW4oKTtcbiAgYWRkSW1nRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xufVxuYWRkSW1nQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVBZGRJbWcpOyIsIi8qKlxuICogVGhpcyBtb2R1bGUgdGFrZXMgY2FyZSBvZiBhbGwgdGhlIHJlcXVlc3RzIG1hZGUgdG8gdGhlIEFQSSAtIGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY29cbiAqIEBtb2R1bGUgQXBpXG4gKi9cblxuLyoqIENsYXNzIHJlcHJlc2VudGluZyBhbGwgdGhlIEFQSSByZWxhdGVkIHJlcXVlc3RzICovXG5jbGFzcyBBcGkge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKXtcbiAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XG4gIH1cblxuICBfY2hlY2tSZXNwb25zZVN0YXR1cyA9IHJlc3BvbnNlID0+IHtcbiAgICAocmVzcG9uc2Uub2spID8gcmVzcG9uc2UuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcyA9ICgpID0+IHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbihyZXNwb25zZSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlU3RhdHVzKHJlc3BvbnNlKSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBpOyJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsInAiLCJDYXJkIiwiY2FyZFRlbXBsYXRlU2VsZWN0b3IiLCJjYXJkIiwiaGFuZGxlQ2FyZENsaWNrIiwiZSIsInRhcmdldCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNhcmRUb0RlbGV0ZSIsImNsb3Nlc3QiLCJyZW1vdmUiLCJ0aGlzIiwiX2ltZ05hbWUiLCJuYW1lIiwiX2ltZ0xpbmsiLCJsaW5rIiwiX2hhbmRsZUNhcmRDbGljayIsIl9jYXJkVGVtcGxhdGVTZWxlY3RvciIsIl9jYXJkRWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfY2FyZExpa2VCdG4iLCJfY2FyZERlbGV0ZUJ0biIsIl9jYXJkSW1nIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlSWNvbiIsIl9oYW5kbGVEZWxldGVDYXJkIiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NhcmRUaXRsZSIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiRm9ybVZhbGlkYXRvciIsImZvcm1WYWxpZGF0aW9uU2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9mb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbGVtZW50Iiwic29tZSIsImlucHV0RWxlbWVudCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJhZGQiLCJlcnJvclNwYW5FbGVtZW50IiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwia2V5IiwiY2xvc2UiLCJjb250YWlucyIsIl9wb3B1cCIsIl9oYW5kbGVDbGlja0Nsb3NlIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlBvcHVwV2l0aEZvcm0iLCJmb3JtUG9wdXBTZWxlY3RvciIsImhhbmRsZUZvcm1TdWJtaXQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dEVsZW1lbnRzTGlzdCIsImZvcm1WYWx1ZXMiLCJ2YWx1ZSIsIl9nZXRJbnB1dFZhbHVlcyIsIlBvcHVwV2l0aEltYWdlIiwiX3BvcHVwSW1nRWxlbWVudCIsIl9wb3B1cEltZ0NhcHRpb25FbGVtZW50IiwiaW1nQ2FwdGlvbiIsImltZ0xpbmsiLCJVc2VySW5mbyIsInVzZXJUaXRsZVNlbGVjdG9yIiwidXNlclN1YnRpdGxlU2VsZWN0b3IiLCJfdXNlclRpdGxlRWxlbWVudCIsIl91c2VyU3VidGl0bGVFbGVtZW50IiwidGl0bGUiLCJzdWJ0aXRsZSIsInBhZ2VMb2dvRWxlbWVudCIsInByb2ZpbGVQaWNFbGVtZW50IiwiZWRpdFByb2ZpbGVCdG4iLCJwcm9maWxlVGl0bGUiLCJwcm9maWxlU3VidGl0bGUiLCJlZGl0UHJvZmlsZVBvcHVwRm9ybSIsImVkaXRQcm9maWxlTmFtZUlucHV0IiwiZWRpdFByb2ZpbGVBYm91dElucHV0IiwiYWRkSW1nQnRuIiwiYWRkSW1nUG9wdXBGb3JtIiwiYXBpIiwib3B0aW9ucyIsInJlc3BvbnNlIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwiX2Jhc2VVcmwiLCJoZWFkZXJzIiwiX2hlYWRlcnMiLCJ0aGVuIiwiX2NoZWNrUmVzcG9uc2VTdGF0dXMiLCJiYXNlVXJsIiwiYXV0aG9yaXphdGlvbiIsInBhZ2VMb2dvVXJsIiwicHJvZmlsZVBpY1VybCIsImVkaXRQcm9maWxlRm9ybVZhbGlkYXRvciIsImFkZEltZ0Zvcm1WYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwiaW1nUG9wdXAiLCJzZXRFdmVudExpc3RlbmVycyIsImltZ0NhcmRzTGlzdCIsImdldEluaXRpYWxDYXJkcyIsImluaXRpYWxDYXJkcyIsImNvbnNvbGUiLCJsb2ciLCJjYXRjaCIsImVyciIsInJlbmRlckl0ZW1zIiwidXNlciIsImN1cnJlbnRVc2VyVGl0bGUiLCJjdXJyZW50VXNlclN1YnRpdGxlIiwic2V0VXNlckluZm8iLCJlZGl0UHJvZmlsZVBvcHVwIiwiYWRkSW1nUG9wdXAiLCJpdGVtIiwiYWRkSXRlbSIsIm9wZW4iLCJnZW5lcmF0ZUNhcmQiLCJnZXRVc2VySW5mbyJdLCJzb3VyY2VSb290IjoiIn0=